<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>分享前端开发常用代码片段 | 小三胖技术栈</title>
    <meta name="description" content="佛系前端大神">
    <meta charset="UTF-8">
  <link rel="icon" href="/Blog/favicon.ico">
    
    <link rel="preload" href="/Blog/assets/css/0.styles.9ba1bd5b.css" as="style"><link rel="preload" href="/Blog/assets/js/app.b624378b.js" as="script"><link rel="preload" href="/Blog/assets/js/26.9960f054.js" as="script"><link rel="prefetch" href="/Blog/assets/js/25.812a025f.js"><link rel="prefetch" href="/Blog/assets/js/2.6f79cb1b.js"><link rel="prefetch" href="/Blog/assets/js/3.d16a0c2c.js"><link rel="prefetch" href="/Blog/assets/js/4.981975ce.js"><link rel="prefetch" href="/Blog/assets/js/5.22251c73.js"><link rel="prefetch" href="/Blog/assets/js/6.628e770d.js"><link rel="prefetch" href="/Blog/assets/js/7.07e2b6b4.js"><link rel="prefetch" href="/Blog/assets/js/8.2bccae8e.js"><link rel="prefetch" href="/Blog/assets/js/9.5fab895e.js"><link rel="prefetch" href="/Blog/assets/js/10.322ce4df.js"><link rel="prefetch" href="/Blog/assets/js/11.006e4719.js"><link rel="prefetch" href="/Blog/assets/js/12.3333e057.js"><link rel="prefetch" href="/Blog/assets/js/13.1af90041.js"><link rel="prefetch" href="/Blog/assets/js/14.182c46a3.js"><link rel="prefetch" href="/Blog/assets/js/15.1cbbb4a1.js"><link rel="prefetch" href="/Blog/assets/js/16.49b9f0b6.js"><link rel="prefetch" href="/Blog/assets/js/17.29b175e7.js"><link rel="prefetch" href="/Blog/assets/js/18.297427c5.js"><link rel="prefetch" href="/Blog/assets/js/19.2663f562.js"><link rel="prefetch" href="/Blog/assets/js/20.b7420290.js"><link rel="prefetch" href="/Blog/assets/js/21.d39c8908.js"><link rel="prefetch" href="/Blog/assets/js/22.f1126d66.js"><link rel="prefetch" href="/Blog/assets/js/23.4a7a29be.js"><link rel="prefetch" href="/Blog/assets/js/24.e6bca216.js"><link rel="prefetch" href="/Blog/assets/js/27.fc3fad79.js"><link rel="prefetch" href="/Blog/assets/js/28.cd83fc3d.js"><link rel="prefetch" href="/Blog/assets/js/29.443e4941.js"><link rel="prefetch" href="/Blog/assets/js/30.6a8a17b9.js"><link rel="prefetch" href="/Blog/assets/js/31.8fc47db9.js"><link rel="prefetch" href="/Blog/assets/js/32.b715a23d.js"><link rel="prefetch" href="/Blog/assets/js/33.518efbd0.js"><link rel="prefetch" href="/Blog/assets/js/34.76e7b1b1.js"><link rel="prefetch" href="/Blog/assets/js/35.f8a6b00b.js"><link rel="prefetch" href="/Blog/assets/js/36.8c12af51.js"><link rel="prefetch" href="/Blog/assets/js/37.cda5ca1d.js"><link rel="prefetch" href="/Blog/assets/js/38.60935ef0.js"><link rel="prefetch" href="/Blog/assets/js/39.26c637dd.js"><link rel="prefetch" href="/Blog/assets/js/40.44a0bfa7.js"><link rel="prefetch" href="/Blog/assets/js/41.259d1527.js"><link rel="prefetch" href="/Blog/assets/js/42.ab80d836.js"><link rel="prefetch" href="/Blog/assets/js/43.0af190a7.js"><link rel="prefetch" href="/Blog/assets/js/44.093f7743.js"><link rel="prefetch" href="/Blog/assets/js/45.8c17580f.js"><link rel="prefetch" href="/Blog/assets/js/46.fd30eace.js"><link rel="prefetch" href="/Blog/assets/js/47.214dd0f8.js"><link rel="prefetch" href="/Blog/assets/js/48.d43dc2ae.js"><link rel="prefetch" href="/Blog/assets/js/49.6136b23c.js"><link rel="prefetch" href="/Blog/assets/js/50.fd4e81e2.js"><link rel="prefetch" href="/Blog/assets/js/51.9fa346c5.js"><link rel="prefetch" href="/Blog/assets/js/52.6e5d9385.js"><link rel="prefetch" href="/Blog/assets/js/53.19db09c4.js">
    <link rel="stylesheet" href="/Blog/assets/css/0.styles.9ba1bd5b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Blog/" class="home-link router-link-active"><!----> <span class="site-name">小三胖技术栈</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Blog/recondRESUME/" class="nav-link">Resume</a></div><div class="nav-item"><a href="/Blog/recondCSS/" class="nav-link">Css</a></div><div class="nav-item"><a href="/Blog/recondJAVASCRIPT/" class="nav-link router-link-active">Javascript</a></div><div class="nav-item"><a href="/Blog/recondVUE/" class="nav-link">Vue</a></div><div class="nav-item"><a href="/Blog/recondNODE/" class="nav-link">Node</a></div><div class="nav-item"><a href="/Blog/recondES6/" class="nav-link">Es6</a></div><div class="nav-item"><a href="/Blog/recondPROJECT/" class="nav-link">projectify</a></div><div class="nav-item"><a href="/Blog/recondSUMMARY/" class="nav-link">summary</a></div><div class="nav-item"><a href="/Blog/recondFEATURE/" class="nav-link">feature</a></div><div class="nav-item"><a href="/Blog/recondGIT/" class="nav-link">git</a></div><div class="nav-item"><a href="/Blog/recondOTHER/" class="nav-link">other</a></div><div class="nav-item"><a href="https://github.com/gaojingwen" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub地址
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Blog/recondRESUME/" class="nav-link">Resume</a></div><div class="nav-item"><a href="/Blog/recondCSS/" class="nav-link">Css</a></div><div class="nav-item"><a href="/Blog/recondJAVASCRIPT/" class="nav-link router-link-active">Javascript</a></div><div class="nav-item"><a href="/Blog/recondVUE/" class="nav-link">Vue</a></div><div class="nav-item"><a href="/Blog/recondNODE/" class="nav-link">Node</a></div><div class="nav-item"><a href="/Blog/recondES6/" class="nav-link">Es6</a></div><div class="nav-item"><a href="/Blog/recondPROJECT/" class="nav-link">projectify</a></div><div class="nav-item"><a href="/Blog/recondSUMMARY/" class="nav-link">summary</a></div><div class="nav-item"><a href="/Blog/recondFEATURE/" class="nav-link">feature</a></div><div class="nav-item"><a href="/Blog/recondGIT/" class="nav-link">git</a></div><div class="nav-item"><a href="/Blog/recondOTHER/" class="nav-link">other</a></div><div class="nav-item"><a href="https://github.com/gaojingwen" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub地址
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Javascript</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Blog/recondJAVASCRIPT/" class="sidebar-link">大笨蛋</a></li><li><a href="/Blog/recondJAVASCRIPT/7分钟理解JS的节流、防抖及使用场景.html" class="sidebar-link">7分钟理解JS的节流、防抖及使用场景</a></li><li><a href="/Blog/recondJAVASCRIPT/FormData 对象的使用.html" class="sidebar-link">FormData 对象的使用</a></li><li><a href="/Blog/recondJAVASCRIPT/JavaScript 运行原理解析.html" class="sidebar-link">JavaScript 运行原理解析</a></li><li><a href="/Blog/recondJAVASCRIPT/js--API.html" class="sidebar-link">js--API</a></li><li><a href="/Blog/recondJAVASCRIPT/JS数组循环的性能和效率分析（for、while、forEach、map、for of）.html" class="sidebar-link">JS数组循环的性能和效率分析（for、while、forEach、map、for of）</a></li><li><a href="/Blog/recondJAVASCRIPT/分享前端开发常用代码片段.html" class="active sidebar-link">分享前端开发常用代码片段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Blog/recondJAVASCRIPT/分享前端开发常用代码片段.html#分享前端开发常用代码片段" class="sidebar-link">分享前端开发常用代码片段</a></li></ul></li><li><a href="/Blog/recondJAVASCRIPT/前端开发常用代码片段.html" class="sidebar-link">前端开发常用代码片段</a></li><li><a href="/Blog/recondJAVASCRIPT/深入深入再深入 js 深拷贝对象.html" class="sidebar-link">深入深入再深入 js 深拷贝对象</a></li><li><a href="/Blog/recondJAVASCRIPT/请你实现一个深克隆.html" class="sidebar-link">面试官:请你实现一个深克隆</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h2 id="分享前端开发常用代码片段"><a href="#分享前端开发常用代码片段" aria-hidden="true" class="header-anchor">#</a> 分享前端开发常用代码片段</h2> <p>[前端大全](javascript:void(0)😉 <em>5月7日</em></p> <p>（点击上方公众号，可快速关注）</p> <blockquote><p>作者：WEBING</p> <p>segmentfault.com/a/1190000014700549</p></blockquote> <p><strong>一、预加载图像</strong></p> <p>如果你的网页中需要使用大量初始不可见的（例如，悬停的）图像，那么可以预加载这些图像。</p> <p><img src="https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1IdLHtiaFiaHlfT6GVqJ3tMWCmv83TxjWKOS2JVr1EHCqeibOp1MLqISBgHvtloHOtIrQa9iceY1X4TA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p> <p><strong>二、检查图像是否加载</strong></p> <p>有时为了继续脚本，你可能需要检查图像是否全部加载完毕。</p> <p><img src="https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1IdLHtiaFiaHlfT6GVqJ3tMW5OlSdibwApp1xfD1PCPLoLfPzA9ianvWj1HcH6uVbysVM7Yxvg4HEUPg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p> <p>你也可以使用 ID 或 CLASS 替换<img> 标签来检查某个特定的图像是否被加载。</p> <p><strong>三、自动修复破坏的图像</strong></p> <p>逐个替换已经破坏的图像链接是非常痛苦的。不过，下面这段简单的代码可以帮助你。</p> <p><img src="https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1IdLHtiaFiaHlfT6GVqJ3tMWJZaaiaia1bGmIEqJy4iaZW5DhsqP5eQYbYQLWa5IfeHle5eKMlCiaia203A/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p> <p><strong>四、悬停切换</strong></p> <p>当用户鼠标悬停在可点击的元素上时，可添加类到元素中，反之则移除类。</p> <p><img src="https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1IdLHtiaFiaHlfT6GVqJ3tMWFzcF3wlrL80eujF6EU1AZXs4gicuEeKZOvUWuLjuFuibymAwOEboX7eA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p> <p>只需要添加必要的 CSS 即可。更简单的方法是使用 toggleClass() 方法。</p> <p><img src="https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1IdLHtiaFiaHlfT6GVqJ3tMWHpoUJ50xAxLT4FjG203iazdNVPEsiaogyYibNibIqicuj9HmhrBTsjY2hwg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p> <p><strong>五、淡入淡出/显示隐藏</strong></p> <hr> <p><img src="https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1IdLHtiaFiaHlfT6GVqJ3tMWKJbyJ6XzqWpcf1ZPI74zicOKribz41XYGCpqSOfRmAyn3IRUFxDCz0Zw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p> <p><strong>六、鼠标滚轮</strong></p> <blockquote><p>$('#content').on(&quot;mousewheel DOMMouseScroll&quot;, function (event) {</p> <p>​    // chrome &amp; ie || // firefox</p> <p>​    var delta = (event.originalEvent.wheelDelta &amp;&amp; (event.originalEvent.wheelDelta &gt; 0 ? 1 : -1)) ||</p> <p>​        (event.originalEvent.detail &amp;&amp; (event.originalEvent.detail &gt; 0 ? -1 : 1));</p> <p>​</p> <p>​    if (delta &gt; 0) {</p> <p>​        console.log('mousewheel top');</p> <p>​    } else if (delta &lt; 0) {</p> <p>​        console.log('mousewheel bottom');</p> <p>​    }</p> <p>});</p></blockquote> <p><strong>七、鼠标坐标</strong></p> <hr> <p>1、JavaScript实现</p> <blockquote><p>X:<input id="xxx" type="text"> Y:<input id="yyy" type="text"></p></blockquote> <blockquote><p>function mousePosition(ev){</p> <p>​    if(ev.pageX || ev.pageY){</p> <p>​        return {x:ev.pageX, y:ev.pageY};</p> <p>​    }</p> <p>​    return {</p> <p>​        x:ev.clientX + document.body.scrollLeft - document.body.clientLeft,</p> <p>​        y:ev.clientY + document.body.scrollTop - document.body.clientTop</p> <p>​    };</p> <p>}</p> <p>function mouseMove(ev){</p> <p>​    ev = ev || window.event;</p> <p>​</p> <p>​    var mousePos = mousePosition(ev);</p> <p>​</p> <p>​    document.getElementById('xxx').value = mousePos.x;</p> <p>​    document.getElementById('yyy').value = mousePos.y;</p> <p>}</p> <p>document.onmousemove = mouseMove;</p></blockquote> <p>2、jQuery实现</p> <blockquote><p>$('#ele').click(function(event){</p> <p>​    //获取鼠标在图片上的坐标</p> <p>​    console.log('X：' + event.offsetX+'\n Y:' + event.offsetY);</p> <p>​</p> <p>​    //获取元素相对于页面的坐标</p> <p>​    console.log('X：'+$(this).offset().left+'\n Y:'+$(this).offset().top);</p> <p>});</p></blockquote> <p><strong>八、禁止移动端浏览器页面滚动</strong></p> <hr> <p>1、HTML实现</p> <blockquote><body ontouchmove="event.preventDefault()"></body></blockquote> <p>2、JavaScript实现</p> <blockquote><p>document.addEventListener('touchmove', function(event) {</p> <p>​    event.preventDefault();</p> <p>});</p></blockquote> <p><strong>九、阻止默认行为</strong></p> <blockquote><p>// JavaScript</p> <p>document.getElementById('btn').addEventListener('click', function (event) {</p> <p>​    event = event || window.event；</p> <p>​    if (event.preventDefault){</p> <p>​        // W3C</p> <p>​        event.preventDefault();</p> <p>​    } else{</p> <p>​        // IE</p> <p>​        event.returnValue = false;</p> <p>​    }</p> <p>}, false);</p> <p>// jQuery</p> <p>$('#btn').on('click', function (event) {</p> <p>​    event.preventDefault();</p> <p>});</p></blockquote> <p><strong>十、阻止冒泡</strong></p> <blockquote><p>// JavaScript</p> <p>document.getElementById('btn').addEventListener('click', function (event) {</p> <p>​    event = event || window.event；</p> <p>​    if (event.stopPropagation){</p> <p>​        // W3C</p> <p>​        event.stopPropagation();</p> <p>​    } else{</p> <p>​        // IE</p> <p>​        event.cancelBubble = true;</p> <p>​    }</p> <p>}, false);</p> <p>// jQuery</p> <p>$('#btn').on('click', function (event) {</p> <p>​    event.stopPropagation();</p> <p>});</p></blockquote> <p><strong>十一、检测浏览器是否支持svg</strong></p> <blockquote><p>function isSupportSVG() {</p> <p>​    var SVG_NS = 'http://www.w3.org/2000/svg';</p> <p>​    return !!document.createElementNS &amp;&amp;!!document.createElementNS(SVG_NS, 'svg').createSVGRect;</p> <p>}</p> <p>console.log(isSupportSVG());</p></blockquote> <p><strong>十二、检测浏览器是否支持canvas</strong></p> <blockquote><p>function isSupportCanvas() {</p> <p>​    if(document.createElement('canvas').getContext){</p> <p>​        return true;</p> <p>​    }else{</p> <p>​        return false;</p> <p>​    }</p> <p>}</p> <p>console.log(isSupportCanvas());</p></blockquote> <p><strong>十三、检测是否是微信浏览器</strong></p> <blockquote><p>function isWeiXinClient() {</p> <p>​    var ua = navigator.userAgent.toLowerCase();</p> <p>​    if (ua.match(/MicroMessenger/i)==&quot;micromessenger&quot;) {</p> <p>​        return true;</p> <p>​    } else {</p> <p>​        return false;</p> <p>​    }</p> <p>}</p> <p>alert(isWeiXinClient());</p></blockquote> <p><strong>十四、检测是否移动端及浏览器内核</strong></p> <blockquote><p>var browser = {</p> <p>​    versions: function() {</p> <p>​        var u = navigator.userAgent;</p> <p>​        return {</p> <p>​            trident: u.indexOf('Trident') &gt; -1, //IE内核</p> <p>​            presto: u.indexOf('Presto') &gt; -1, //opera内核</p> <p>​            webKit: u.indexOf('AppleWebKit') &gt; -1, //苹果、谷歌内核</p> <p>​            gecko: u.indexOf('Firefox') &gt; -1, //火狐内核Gecko</p> <p>​            mobile: !!u.match(/AppleWebKit.<em>Mobile.</em>/), //是否移动终端</p> <p>​            ios: !!u.match(/(i[^;]+;( U;)? CPU.+Mac OS X/), //ios</p> <p>​            android: u.indexOf('Android') &gt; -1 || u.indexOf('Linux') &gt; -1, //android</p> <p>​            iPhone: u.indexOf('iPhone') &gt; -1 , //iPhone</p> <p>​            iPad: u.indexOf('iPad') &gt; -1, //iPad</p> <p>​            webApp: u.indexOf('Safari') &gt; -1 //Safari</p> <p>​        };</p> <p>​    }</p> <p>}</p> <p>if (browser.versions.mobile() || browser.versions.ios() || browser.versions.android() ||browser.versions.iPhone() || browser.versions.iPad()) {</p> <p>​    alert('移动端');</p> <p>}</p></blockquote> <p><strong>十五、检测是否电脑端/移动端</strong></p> <blockquote><p>var browser={</p> <p>​    versions:function(){</p> <p>​        var u = navigator.userAgent, app = navigator.appVersion;</p> <p>​        var sUserAgent = navigator.userAgent;</p> <p>​        return {</p> <p>​        trident: u.indexOf('Trident') &gt; -1,</p> <p>​        presto: u.indexOf('Presto') &gt; -1,</p> <p>​        isChrome: u.indexOf(&quot;chrome&quot;) &gt; -1,</p> <p>​        isSafari: !u.indexOf(&quot;chrome&quot;) &gt; -1 &amp;&amp; (/webkit|khtml/).test(u),</p> <p>​        isSafari3: !u.indexOf(&quot;chrome&quot;) &gt; -1 &amp;&amp; (/webkit|khtml/).test(u) &amp;&amp; u.indexOf('webkit/5') != -1,</p> <p>​        webKit: u.indexOf('AppleWebKit') &gt; -1,</p> <p>​        gecko: u.indexOf('Gecko') &gt; -1 &amp;&amp; u.indexOf('KHTML') == -1,</p> <p>​        mobile: !!u.match(/AppleWebKit.<em>Mobile.</em>/),</p> <p>​        ios: !!u.match(/(i[^;]+;( U;)? CPU.+Mac OS X/),</p> <p>​        android: u.indexOf('Android') &gt; -1 || u.indexOf('Linux') &gt; -1,</p> <p>​        iPhone: u.indexOf('iPhone') &gt; -1,</p> <p>​        iPad: u.indexOf('iPad') &gt; -1,</p> <p>​        iWinPhone: u.indexOf('Windows Phone') &gt; -1</p> <p>​        };</p> <p>​    }()</p> <p>}</p> <p>if(browser.versions.mobile || browser.versions.iWinPhone){</p> <p>​    window.location = &quot;http:/www.baidu.com/m/&quot;;</p> <p>}</p></blockquote> <p><strong>十六、检测浏览器内核</strong></p> <blockquote><p>function getInternet(){</p> <p>​    if(navigator.userAgent.indexOf(&quot;MSIE&quot;)&gt;0) {</p> <p>​      return &quot;MSIE&quot;;       //IE浏览器</p> <p>​    }</p> <p>​    if(isFirefox=navigator.userAgent.indexOf(&quot;Firefox&quot;)&gt;0){</p> <p>​      return &quot;Firefox&quot;;     //Firefox浏览器</p> <p>​    }</p> <p>​    if(isSafari=navigator.userAgent.indexOf(&quot;Safari&quot;)&gt;0) {</p> <p>​      return &quot;Safari&quot;;      //Safan浏览器</p> <p>​    }</p> <p>​    if(isCamino=navigator.userAgent.indexOf(&quot;Camino&quot;)&gt;0){</p> <p>​      return &quot;Camino&quot;;   //Camino浏览器</p> <p>​    }</p> <p>​    if(isMozilla=navigator.userAgent.indexOf(&quot;Gecko/&quot;)&gt;0){</p> <p>​      return &quot;Gecko&quot;;    //Gecko浏览器</p> <p>​    }</p> <p>}</p></blockquote> <p><strong>十七、强制移动端页面横屏显示</strong></p> <blockquote><p>$( window ).on( &quot;orientationchange&quot;, function( event ) {</p> <p>​    if (event.orientation=='portrait') {</p> <p>​        $('body').css('transform', 'rotate(90deg)');</p> <p>​    } else {</p> <p>​        $('body').css('transform', 'rotate(0deg)');</p> <p>​    }</p> <p>});</p> <p>$( window ).orientationchange();</p></blockquote> <p><strong>十八、电脑端页面全屏显示</strong></p> <blockquote><p>function fullscreen(element) {</p> <p>​    if (element.requestFullscreen) {</p> <p>​        element.requestFullscreen();</p> <p>​    } else if (element.mozRequestFullScreen) {</p> <p>​        element.mozRequestFullScreen();</p> <p>​    } else if (element.webkitRequestFullscreen) {</p> <p>​        element.webkitRequestFullscreen();</p> <p>​    } else if (element.msRequestFullscreen) {</p> <p>​        element.msRequestFullscreen();</p> <p>​    }</p> <p>}</p> <p>fullscreen(document.documentElement);</p></blockquote> <p><strong>十九、获得/失去焦点</strong></p> <hr> <p>1、JavaScript实现</p> <blockquote><input id="i_input" type="text" value="会员卡号/手机号"></blockquote> <blockquote><p>// JavaScript</p> <p>window.onload = function(){</p> <p>​    var oIpt = document.getElementById(&quot;i_input&quot;);</p> <p>​    if(oIpt.value == &quot;会员卡号/手机号&quot;){</p> <p>​        oIpt.style.color = &quot;#888&quot;;</p> <p>​    }else{</p> <p>​        oIpt.style.color = &quot;#000&quot;;</p> <p>​    };</p> <p>​    oIpt.onfocus = function(){</p> <p>​        if(this.value == &quot;会员卡号/手机号&quot;){</p> <p>​            this.value=&quot;&quot;;</p> <p>​            this.style.color = &quot;#000&quot;;</p> <p>​            this.type = &quot;password&quot;;</p> <p>​        }else{</p> <p>​            this.style.color = &quot;#000&quot;;</p> <p>​        }</p> <p>​    };</p> <p>​</p> <p>​    oIpt.onblur = function(){</p> <p>​        if(this.value == &quot;&quot;){</p> <p>​            this.value=&quot;会员卡号/手机号&quot;;</p> <p>​            this.style.color = &quot;#888&quot;;</p> <p>​            this.type = &quot;text&quot;;</p> <p>​        }</p> <p>​    };</p> <p>}</p></blockquote> <p>2、jQuery实现</p> <blockquote><input type="text" id="showPwd" value="请输入您的注册密码" class="oldpsw"> <input type="password" name="psw" id="password" value class="oldpsw" style="display:none;"></blockquote> <blockquote><p>// jQuery</p> <p>$(&quot;#showPwd&quot;).focus(function() {</p> <p>​    var text_value=$(this).val();</p> <p>​    if (text_value =='请输入您的注册密码') {</p> <p>​        $(&quot;#showPwd&quot;).hide();</p> <p>​        $(&quot;#password&quot;).show().focus();</p> <p>​    }</p> <p>});</p> <p>$(&quot;#password&quot;).blur(function() {</p> <p>​    var text_value = $(this).val();</p> <p>​    if (text_value == &quot;&quot;) {</p> <p>​        $(&quot;#showPwd&quot;).show();</p> <p>​        $(&quot;#password&quot;).hide();</p> <p>​    }</p> <p>});</p></blockquote> <p><strong>二十、获取上传文件大小</strong></p> <blockquote><input type="file" id="filePath" onchange="getFileSize(this)"></blockquote> <blockquote><p>// 兼容IE9低版本</p> <p>function getFileSize(obj){</p> <p>​    var filesize;</p> <p>​</p> <p>​    if(obj.files){</p> <p>​        filesize = obj.files[0].size;</p> <p>​    }else{</p> <p>​        try{</p> <p>​            var path,fso;</p> <p>​            path = document.getElementById('filePath').value;</p> <p>​            fso = new ActiveXObject(&quot;Scripting.FileSystemObject&quot;);</p> <p>​            filesize = fso.GetFile(path).size;</p> <p>​        }</p> <p>​        catch(e){</p> <p>​            // 在IE9及低版本浏览器，如果不容许ActiveX控件与页面交互，点击了否，就无法获取size</p> <p>​            console.log(e.message); // Automation 服务器不能创建对象</p> <p>​            filesize = 'error'; // 无法获取</p> <p>​        }</p> <p>​    }</p> <p>​    return filesize;</p> <p>}</p></blockquote> <p><strong>二十一、限制上传文件类型</strong></p> <hr> <p>1、高版本浏览器</p> <blockquote><input type="file" name="filePath" accept=".jpg,.jpeg,.doc,.docxs,.pdf"></blockquote> <p>2、限制图片</p> <blockquote><input type="file" value="上传" accept="image/*" class="file"></blockquote> <p>3、低版本浏览器</p> <blockquote><input type="file" id="filePath" onchange="limitTypes()"></blockquote> <blockquote><p>/* 通过扩展名，检验文件格式。</p> <p>* @parma filePath{string} 文件路径</p> <p>* @parma acceptFormat{Array} 允许的文件类型</p> <p>* @result 返回值{Boolen}：true or false</p> <p>*/</p> <p>function checkFormat(filePath,acceptFormat){</p> <p>​    var resultBool= false,</p> <p>​        ex = filePath.substring(filePath.lastIndexOf('.') + 1);</p> <p>​        ex = ex.toLowerCase();</p> <p>​</p> <p>​    for(var i = 0; i &lt; acceptFormat.length; i++){</p> <p>​    　　if(acceptFormat[i] == ex){</p> <p>​            resultBool = true;</p> <p>​            break;</p> <p>​    　　}</p> <p>​    }</p> <p>​    return resultBool;</p> <p>};</p> <p>​</p> <p>function limitTypes(){</p> <p>​    var obj = document.getElementById('filePath');</p> <p>​    var path = obj.value;</p> <p>​    var result = checkFormat(path,['bmp','jpg','jpeg','png']);</p> <p>​</p> <p>​    if(!result){</p> <p>​        alert('上传类型错误，请重新上传');</p> <p>​        obj.value = '';</p> <p>​    }</p> <p>}</p></blockquote> <p><strong>二十二、正则表达式</strong></p> <blockquote><p>//验证邮箱</p> <p>/^\w+@([0-9a-zA-Z]+[.])+[a-z]{2,4}$/</p> <p>//验证手机号</p> <p>/^1[3|5|8|7]\d{9}$/</p> <p>//验证URL</p> <p>/^http://.+./</p> <p>//验证身份证号码</p> <p>/(^\d{15}$)|(^\d{17}([0-9]|X|x)$)/</p> <p>//匹配字母、数字、中文字符</p> <p>/^([A-Za-z0-9]|[\u4e00-\u9fa5])*$/</p> <p>//匹配中文字符</p> <p>/[\u4e00-\u9fa5]/</p> <p>//匹配双字节字符(包括汉字)</p> <p>/[^\x00-\xff]/</p></blockquote> <p><strong>二十三、限制字符数</strong></p> <blockquote><input id="txt" type="text"></blockquote> <blockquote><p>//字符串截取</p> <p>function getByteVal(val, max) {</p> <p>​    var returnValue = '';</p> <p>​    var byteValLen = 0;</p> <p>​    for (var i = 0; i &lt; val.length; i++) { if (val[i].match(/[^\x00-\xff]/ig) != null) byteValLen += 2; elsebyteValLen += 1; if (byteValLen &gt; max) break;</p> <p>​        returnValue += val[i];</p> <p>​    }</p> <p>​    return returnValue;</p> <p>}</p> <p>$('#txt').on('keyup', function () {</p> <p>​    var val = this.value;</p> <p>​    if (val.replace(/[^\x00-\xff]/g, &quot;**&quot;).length &gt; 14) {</p> <p>​        this.value = getByteVal(val, 14);</p> <p>​    }</p> <p>});</p></blockquote> <p><strong>二十四、验证码倒计时</strong></p> <blockquote><input id="send" type="button" value="发送验证码"></blockquote> <blockquote><p>// JavaScript</p> <p>var times = 60, // 时间设置60秒</p> <p>timer = null;</p> <p>document.getElementById('send').onclick = function () {</p> <p>// 计时开始</p> <p>timer = setInterval(function () {</p> <p>times--;</p> <p>if (times &lt;= 0) {</p> <p>send.value = '发送验证码';</p> <p>clearInterval(timer);</p> <p>send.disabled = false;</p> <p>times = 60;</p> <p>} else {</p> <p>send.value = times + '秒后重试';</p> <p>send.disabled = true;</p> <p>}</p> <p>}, 1000);</p> <p>}</p></blockquote> <blockquote><p>var times = 60,</p> <p>​    timer = null;</p> <p>$('#send').on('click', function () {</p> <p>​    var $this = $(this);</p> <p>​</p> <p>​    // 计时开始</p> <p>​    timer = setInterval(function () {</p> <p>​        times--;</p> <p>​</p> <p>​        if (times &lt;= 0) {</p> <p>​            $this.val('发送验证码');</p> <p>​            clearInterval(timer);</p> <p>​            $this.attr('disabled', false);</p> <p>​            times = 60;</p> <p>​        } else {</p> <p>​            $this.val(times + '秒后重试');</p> <p>​            $this.attr('disabled', true);</p> <p>​        }</p> <p>​    }, 1000);</p> <p>});</p></blockquote> <p><strong>二十五、时间倒计时</strong></p> <blockquote><p id="_lefttime"></p></blockquote> <blockquote><p>var times = 60,</p> <p>​    timer = null;</p> <p>$('#send').on('click', function () {</p> <p>​    var $this = $(this);</p> <p>​</p> <p>​    // 计时开始</p> <p>​    timer = setInterval(function () {</p> <p>​        times--;</p> <p>​</p> <p>​        if (times &lt;= 0) {</p> <p>​            $this.val('发送验证码');</p> <p>​            clearInterval(timer);</p> <p>​            $this.attr('disabled', false);</p> <p>​            times = 60;</p> <p>​        } else {</p> <p>​            $this.val(times + '秒后重试');</p> <p>​            $this.attr('disabled', true);</p> <p>​        }</p> <p>​    }, 1000);</p> <p>});</p></blockquote> <p><strong>二十六、倒计时跳转</strong></p> <blockquote><div id="showtimes"></div></blockquote> <blockquote><p>// 设置倒计时秒数</p> <p>var t = 10;</p> <p>// 显示倒计时秒数</p> <p>function showTime(){</p> <p>​    t -= 1;</p> <p>​    document.getElementById('showtimes').innerHTML= t;</p> <p>​    if(t==0){</p> <p>​        location.href='error404.asp';</p> <p>​    }</p> <p>​    //每秒执行一次 showTime()</p> <p>​    setTimeout(&quot;showTime()&quot;,1000);</p> <p>}</p> <p>showTime();</p></blockquote> <p><strong>二十七、时间戳、毫秒格式化</strong></p> <blockquote><p>function formatDate(now) {</p> <p>​    var y = now.getFullYear();</p> <p>​    var m = now.getMonth() + 1; // 注意 JavaScript 月份+1</p> <p>​    var d = now.getDate();</p> <p>​    var h = now.getHours();</p> <p>​    var m = now.getMinutes();</p> <p>​    var s = now.getSeconds();</p> <p>​</p> <p>​    return y + &quot;-&quot; + m + &quot;-&quot; + d + &quot; &quot; + h + &quot;:&quot; + m + &quot;:&quot; + s;</p> <p>}</p> <p>var nowDate = new Date(1442978789184);</p> <p>alert(formatDate(nowDate));</p></blockquote> <p><strong>二十八、当前日期</strong></p> <blockquote><p>var calculateDate = function(){</p> <p>​    var date = new Date();</p> <p>​    var weeks = [&quot;日&quot;,&quot;一&quot;,&quot;二&quot;,&quot;三&quot;,&quot;四&quot;,&quot;五&quot;,&quot;六&quot;];</p> <p>​    return date.getFullYear()+&quot;年&quot;+(date.getMonth()+1)+&quot;月&quot;+</p> <p>​    date.getDate()+&quot;日 星期&quot;+weeks[date.getDay()];</p> <p>}</p> <p>$(function(){</p> <p>​    $(&quot;#dateSpan&quot;).html(calculateDate());</p> <p>});</p></blockquote> <p><strong>二十九、判断周六/周日</strong></p> <blockquote><p id="text"></p></blockquote> <blockquote><p>function time(y,m){</p> <p>​    var tempTime = new Date(y,m,0);</p> <p>​    var time = new Date();</p> <p>​    var saturday = new Array();</p> <p>​    var sunday = new Array();</p> <p>​</p> <p>​    for(var i=1;i&lt;=tempTime.getDate();i++){</p> <p>​        time.setFullYear(y,m-1,i);</p> <p>​</p> <p>​        var day = time.getDay();</p> <p>​</p> <p>​        if(day == 6){</p> <p>​            saturday.push(i);</p> <p>​        }else if(day == 0){</p> <p>​            sunday.push(i);</p> <p>​        }</p> <p>​    }</p> <p>​</p> <p>​    var text = y+&quot;年&quot;+m+&quot;月份&quot;+&quot;<br>&quot;</p> <p>​                +&quot;周六：&quot;+saturday.toString()+&quot;<br>&quot;</p> <p>​                +&quot;周日：&quot;+sunday.toString();</p> <p>​</p> <p>​    document.getElementById(&quot;text&quot;).innerHTML = text;</p> <p>}</p> <p>time(2018,5);</p></blockquote> <p><strong>三十、AJAX调用错误处理</strong></p> <hr> <p>当 Ajax 调用返回 404 或 500 错误时，就执行错误处理程序。如果没有定义处理程序，其他的 jQuery 代码或会就此罢工。定义一个全局的 Ajax 错误处理程序</p> <p><img src="https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1IdLHtiaFiaHlfT6GVqJ3tMWzUh4PVqq1GIOaic2KubQicbjP7xhvRhMIxKtXhzLMDCRm3rHTLukcjiaA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p> <p><strong>三十一、链式插件调用</strong></p> <p>jQuery 允许“链式”插件的方法调用，以减轻反复查询 DOM 并创建多个 jQuery 对象的过程。</p> <p><img src="https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1IdLHtiaFiaHlfT6GVqJ3tMWg7ohHSYJR8TTJGfu4pUd3s1iaTcvdzNBYLFxHGSctAFQtDCBnqdLfcQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p> <p>通过使用链式，可以改善</p> <p><img src="https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1IdLHtiaFiaHlfT6GVqJ3tMWl835NWiaqyD0uGUUaWoR9pnOIA9XibqCIEpic3cGPaWAkrDMjbt6XlMsg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p> <p>还有一种方法是在（前缀$）变量中高速缓存元素</p> <p><img src="https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1IdLHtiaFiaHlfT6GVqJ3tMWib8o7zEtJdES7vSNZ1zoG4bcE8oicTdZsGBPleQs9DfiaX4oSiaFOib9LAQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p> <p>链式和高速缓存的方法都是 jQuery 中可以让代码变得更短和更快的最佳做法。</p> <p>本文在GitHub的地址 Common-code</p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">9/14/2018, 5:13:48 PM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/Blog/assets/js/26.9960f054.js" defer></script><script src="/Blog/assets/js/app.b624378b.js" defer></script>
  </body>
</html>
