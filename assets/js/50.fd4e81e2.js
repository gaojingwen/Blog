(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{128:function(e,t,s){"use strict";s.r(t);var a=s(0),i=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"vue2-0-é¡¹ç›®å¼€å‘å°ç»“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue2-0-é¡¹ç›®å¼€å‘å°ç»“","aria-hidden":"true"}},[e._v("#")]),e._v(" vue2.0 é¡¹ç›®å¼€å‘å°ç»“")]),e._v(" "),s("p",[e._v("ç¦»å°˜ä¸ç†äºº [SegmentFault](javascript:void(0)ğŸ˜‰ "),s("em",[e._v("2017-09-11")])]),e._v(" "),s("h4",{attrs:{id:"é¡¹ç›®æ¶æ„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é¡¹ç›®æ¶æ„","aria-hidden":"true"}},[e._v("#")]),e._v(" é¡¹ç›®æ¶æ„")]),e._v(" "),s("p",[e._v("é¡¹ç›®ç›®å½•")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("â”œâ”€â”€ buildâ”œâ”€â”€ configâ”œâ”€â”€ distâ”‚   â””â”€â”€ staticâ”‚       â”œâ”€â”€ cssâ”‚       â”œâ”€â”€ fontsâ”‚       â”œâ”€â”€ imagesâ”‚       â”œâ”€â”€ jsâ”‚       â””â”€â”€ libâ”œâ”€â”€ srcâ”‚   â”œâ”€â”€ apiâ”‚   â”œâ”€â”€ assetsâ”‚   â”‚   â”œâ”€â”€ globalâ”‚   â”‚   â””â”€â”€ imagesâ”‚   â”‚       â””â”€â”€ footerâ”‚   â”œâ”€â”€ componentsâ”‚   â”‚   â”œâ”€â”€ commonâ”‚   â”‚   â”œâ”€â”€ newsâ”‚   â”‚   â””â”€â”€ profileâ”‚   â”‚       â””â”€â”€ chargeâ”‚   â”œâ”€â”€ configâ”‚   â”œâ”€â”€ mixinâ”‚   â”œâ”€â”€ routerâ”‚   â”œâ”€â”€ serviceâ”‚   â”œâ”€â”€ storeâ”‚   â””â”€â”€ utilâ””â”€â”€ static    â”œâ”€â”€ images    â””â”€â”€ lib \n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("é¡¹ç›®ç›®å½•æ˜¯é‡‡ç”¨ "),s("code",[e._v("vue-cli")]),e._v(" è‡ªåŠ¨ç”Ÿæˆï¼Œå…¶å®ƒæŒ‰éœ€è‡ªå·±æ–°å»ºå°±å¥½äº†ã€‚")]),e._v(" "),s("h4",{attrs:{id:"å¼€å‘å®è·µ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¼€å‘å®è·µ","aria-hidden":"true"}},[e._v("#")]),e._v(" å¼€å‘å®è·µ")]),e._v(" "),s("p",[s("strong",[e._v("åŠ¨æ€ä¿®æ”¹ document title")])]),e._v(" "),s("p",[e._v("åœ¨ä¸åŒçš„è·¯ç”±é¡µé¢ï¼Œæˆ‘ä»¬éœ€è¦åŠ¨æ€çš„ä¿®æ”¹æ–‡æ¡£æ ‡é¢˜ï¼Œå¯ä»¥å°†æ¯ä¸ªé¡µé¢çš„æ ‡é¢˜é…ç½®åœ¨è·¯ç”±å…ƒä¿¡æ¯ "),s("code",[e._v("meta")]),e._v(" é‡Œé¢å¸¦ä¸Šï¼Œç„¶ååœ¨ "),s("code",[e._v("router.beforeEach")]),e._v(" é’©å­å‡½æ•°ä¸­ä¿®æ”¹ï¼š")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("import Vue from 'vue';import Router from 'vue-router';Vue.use(Router);const router = new Router({  mode: 'history',  routes: [    { path: '/', component: Index, meta: { title: 'æ¨èäº§å“å¾—ä¸°åšå¥–é‡‘' } },    {      path: '/news',      component: News,      meta: { title: 'å…¬å‘Šåˆ—è¡¨' },      children: [        { path: '', redirect: 'list' },        { path: 'list', component: NewsList },        { path: 'detail/:newsId', component: NewsDetail, meta: { title: 'å…¬å‘Šè¯¦æƒ…' } }      ]    },    {      path: '/guide',      component: GuideProtocol,      meta: {        title: 'æ–°æ‰‹æŒ‡å—'      }    }  ]});router.beforeEach((to, from, next) => {  let documentTitle = 'å•†åŸä¼šå‘˜å¹³å°';  // path æ˜¯å¤šçº§çš„ï¼Œéå†  to.matched.forEach((path) => {    if (path.meta.title) {      documentTitle += ` - ${path.meta.title}`;    }  });  document.title = documentTitle;  next();});\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[s("strong",[e._v("Event Bus ä½¿ç”¨åœºæ™¯")])]),e._v(" "),s("p",[s("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/aVp1YC8UV0cHx6kEIFfVV2Jo5lwyicic3pg5bicjq1iaSH7bt0mfYkBicrorUe45UutQ4kxSFMqBUBiclfq1n1kQp7qw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"img"}})]),e._v(" "),s("p",[e._v("æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­å¼•å…¥äº† "),s("code",[e._v("vuex")]),e._v(" ï¼Œé€šå¸¸æƒ…å†µä¸‹æ˜¯ä¸éœ€è¦ä½¿ç”¨ "),s("code",[e._v("eventbus")]),e._v(" çš„ï¼Œä½†æ˜¯æœ‰ä¸€ç§æƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦ä½¿ç”¨å®ƒï¼Œé‚£å°±æ˜¯åœ¨è·¯ç”±é’©å­å‡½æ•°å†…éƒ¨çš„æ—¶ï¼Œåœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ "),s("code",[e._v("beforeEnter")]),e._v(" è·¯ç”±é’©å­é‡Œé¢å¯¹å¤–æŠ›å‡ºäº‹ä»¶ï¼Œåœ¨è¿™ä¸ªé’©å­å‡½æ•°ä¸­æˆ‘ä»¬æ— æ³•å»åˆ° "),s("code",[e._v("this")]),e._v(" å¯¹è±¡ã€‚")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("beforeEnter: (to, from, next) => {    const userInfo = localStorage.getItem(userFlag);    if (isPrivateMode()) {        EventBus.$emit('get-localdata-error');        next(false);        return;    }})\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("åœ¨ "),s("code",[e._v("App.vue")]),e._v(" çš„ "),s("code",[e._v("mouted")]),e._v(" æ–¹æ³•ä¸­ç›‘å¬è¿™ä¸ªäº‹ä»¶")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("EventBus.$on('get-localdata-error', () => {    this.$alert('è¯·å‹¿ä½¿ç”¨æ— ç—•æ¨¡å¼æµè§ˆ');});\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[s("strong",[e._v("è‡ªå®šä¹‰æŒ‡ä»¤å®ç°åŸ‹ç‚¹æ•°æ®ç»Ÿè®¡")])]),e._v(" "),s("p",[e._v("åœ¨é¡¹ç›®ä¸­é€šå¸¸éœ€è¦åšæ•°æ®åŸ‹ç‚¹ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œä½¿ç”¨è‡ªå®šä¹‰æŒ‡ä»¤å°†ä¼šå˜éå¸¸ç®€å•")]),e._v(" "),s("p",[e._v("åœ¨é¡¹ç›®å…¥å£æ–‡ä»¶ "),s("code",[e._v("main.js")]),e._v(" ä¸­é…ç½®æˆ‘ä»¬çš„è‡ªå®šä¹‰æŒ‡ä»¤")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("// å‘ä½åŸ‹ç‚¹æŒ‡ä»¤Vue.directive('stat', {  bind(el, binding) {    el.addEventListener('click', () => {      const data = binding.value;      let prefix = 'store';      if (OS.isAndroid || OS.isPhone) {        prefix = 'mall';      }      analytics.request({        ty: `${prefix}_${data.type}`,        dc: data.desc || ''      }, 'n');    }, false);  }});\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("åœ¨ç»„ä»¶ä¸­ä½¿ç”¨æˆ‘ä»¬çš„è‡ªå®šä¹‰æŒ‡ä»¤")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/aVp1YC8UV0cHx6kEIFfVV2Jo5lwyicic3pzNBdN7sHXnFXU4IT1iaGRVJibLqhTYDvr0ia5PzMxRHhWCYeZWXciaETSA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"img"}})]),e._v(" "),s("p",[s("strong",[e._v("ä½¿ç”¨è¿‡æ»¤å™¨å®ç°å±•ç¤ºä¿¡æ¯æ ¼å¼åŒ–")])]),e._v(" "),s("p",[e._v("å¦‚ä¸‹å›¾ä¸­å¥–é‡‘æ•°æ®ä¿¡æ¯ï¼Œæˆ‘ä»¬éœ€è¦å°†åå°è¿”å›çš„å¥–é‡‘æ ¼å¼åŒ–ä¸ºå¸¦ä¸¤ä½å°æ•°ç‚¹çš„æ ¼å¼ï¼ŒåŒæ—¶ï¼Œå¦‚æœè¿”å›çš„é‡‘é¢æ˜¯åŒºé—´ç±»å‹ï¼Œéœ€è¦é¢å¤–åŠ ä¸Š èµ· å­—å’Œ ï¿¥ é‡‘é¢ç¬¦å·")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/aVp1YC8UV0cHx6kEIFfVV2Jo5lwyicic3pzNBdN7sHXnFXU4IT1iaGRVJibLqhTYDvr0ia5PzMxRHhWCYeZWXciaETSA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"img"}})]),e._v(" "),s("p",[e._v("åœ¨å…¥å£æ–‡ä»¶ "),s("code",[e._v("main.js")]),e._v(" ä¸­é…ç½®æˆ‘ä»¬è‡ªå®šä¹‰çš„è¿‡æ»¤å™¨")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Vue.filter('money', (value, config = { unit: 'ï¿¥', fixed: 2 }) => {  const moneyStr = `${value}`;  if (moneyStr.indexOf('-') > -1) {    const scope = moneyStr.split('-');    return `${config.unit}${parseFloat(scope[0]).toFixed(config.fixed).toString()} èµ·`;  } else if (value === 0) {    return value;  }  return `${config.unit}${parseFloat(moneyStr).toFixed(config.fixed).toString()}`;});\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼š")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('<p class="price">{{detail.priceScope | money}}</p><div :class="{singleWrapper: isMobile}">    <p class="rate">æ¯”ç‡ï¼š{{detail.commissionRateScope}}%</p>    <p class="income">å¥–é‡‘ï¼š{{detail.expectedIncome | money}}</p></div>\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[s("strong",[e._v("axios ä½¿ç”¨é…ç½®")])]),e._v(" "),s("p",[e._v("åœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† axios åšæ¥å£è¯·æ±‚")]),e._v(" "),s("p",[e._v("åœ¨é¡¹ç›®ä¸­å…¨å±€é…ç½® "),s("code",[e._v("/api/common.js")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("import axios from 'axios';import qs from 'qs';import store from '../store';// å…¨å±€é»˜è®¤é…ç½®// è®¾ç½® POST è¯·æ±‚å¤´axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';// é…ç½® CORS è·¨åŸŸaxios.defaults.withCredentials = true;axios.defaults.crossDomain = true;// è¯·æ±‚å‘èµ·å‰æ‹¦æˆªå™¨axios.interceptors.request.use((config) => {  // å…¨å±€ loading çŠ¶æ€ï¼Œè§¦å‘ loading æ•ˆæœ  store.dispatch('updateLoadingStatus', {    isLoading: true  });  // POST è¯·æ±‚å‚æ•°å¤„ç†æˆ axios post æ–¹æ³•æ‰€éœ€çš„æ ¼å¼  if (config.method === 'post') {    config.data = qs.stringify(config.data);  }  // è¿™å¥ä¸èƒ½çœï¼Œä¸ç„¶åé¢çš„è¯·æ±‚å°±æ— æ³•æˆåŠŸå‘èµ·ï¼Œå› ä¸ºè¯»ä¸åˆ°é…ç½®å‚æ•°  return config;}, () => {  // å¼‚å¸¸å¤„ç†  store.dispatch('updateLoadingStatus', {    isLoading: false  });});// å“åº”æ‹¦æˆªaxios.interceptors.response.use((response) => {  // å…³é—­ loading æ•ˆæœ  store.dispatch('updateLoadingStatus', {    isLoading: false  });  // å…¨å±€ç™»å½•è¿‡æ»¤ï¼Œå¦‚æœæ²¡æœ‰ç™»å½•ï¼Œç›´æ¥è·³è½¬åˆ°ç™»å½• URL  if (response.data.code === 300) {    // æœªç™»å½•    window.location.href = getLoginUrl();    return false;  }  // è¿™é‡Œè¿”å›çš„ response.data æ˜¯è¢« axios åŒ…è£…è¿‡çš„ä¸€æˆï¼Œæ‰€ä»¥åœ¨è¿™é‡ŒæŠ½å–å‡ºæ¥  return response.data;}, (error) => {  store.dispatch('updateLoadingStatus', {    isLoading: false  });  return Promise.reject(error);});// å¯¼å‡ºexport default axios;\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("ç„¶åæˆ‘ä»¬åœ¨æ¥å£ä¸­ä½¿ç”¨å°±æ–¹ä¾¿å¾ˆå¤šäº† "),s("code",[e._v("/api/xxx.js")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("import axios from './common';const baseURL = '/api/profile';const USER_BASE_INFO = `${baseURL}/getUserBaseInfo.json`;const UPDATE_USER_INFO = `${baseURL}/saveUserInfo.json`;// æ›´æ–°ç”¨æˆ·å®åè®¤è¯ä¿¡æ¯const updateUserInfo = userinfo => axios.post(UPDATE_USER_INFO, userinfo);// è·å–ç”¨æˆ·åŸºç¡€ä¿¡æ¯const getUserBaseInfo = () => axios.get(USER_BASE_INFO);\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[s("strong",[e._v("vuex çŠ¶æ€åœ¨å“åº”å¼é¡µé¢ä¸­çš„å¦™ç”¨")])]),e._v(" "),s("p",[e._v("ç”±äºé¡¹ç›®æ˜¯å“åº”å¼é¡µé¢ï¼ŒPC ç«¯å’Œç§»åŠ¨ç«¯åœ¨è¡¨ç°æˆæœ‰å¾ˆå¤šä¸ä¸€è‡´çš„åœ°æ–¹ï¼Œæœ‰æ—¶å€™å•å•é€šè¿‡ CSS æ— æ³•å®ç°äº¤äº’ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬çš„ "),s("code",[e._v("vuex")]),e._v(" çŠ¶æ€å°±æ´¾ä¸Šç”¨åœºäº†ï¼Œ")]),e._v(" "),s("p",[e._v("æˆ‘ä»¬ä¸€å¼€å§‹åœ¨ "),s("code",[e._v("App.vue")]),e._v(" é‡Œé¢ç›‘å¬äº†é¡µé¢çš„ "),s("code",[e._v("resize")]),e._v(" äº‹ä»¶ï¼ŒåŠ¨æ€çš„æ›´æ–° "),s("code",[e._v("vuex")]),e._v(" é‡Œé¢ "),s("code",[e._v("isMobile")]),e._v("çš„çŠ¶æ€å€¼")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("window.onresize = throttle(() => { this.updatePlatformStatus({   isMobile: isMobile() });}, 500);\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("ç„¶åï¼Œæˆ‘ä»¬åœ¨ç»„ä»¶å±‚ï¼Œå°±èƒ½å“åº”å¼çš„æ¸²æŸ“ä¸åŒçš„ "),s("code",[e._v("dom")]),e._v(" ç»“æ„äº†ã€‚å…¶ä¸­æœ€å¸¸è§çš„æ˜¯ PC ç«¯å’Œç§»åŠ¨ç«¯åŠ è½½çš„å›¾ç‰‡éœ€è¦ä¸åŒçš„è§„æ ¼çš„ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥è¿™ä¸ªåš")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('methods: {  loadImgAssets(name, suffix = \'.jpg\') {    return require(`../assets/images/${name}${this.isMobile ? \'-mobile\' : \'\'}${suffix}`);  },}<img class="feed-back" :src="loadImgAssets(\'feed-back\')"<img v-lazy="{src: isMobile ? detail.imgUrlMobile : detail.imgUrlPc, loading: placeholder}">// åŠ¨æ€æ¸²æŸ“ä¸åŒè§„æ ¼çš„ dislog<el-dialog :visible.sync="dialogVisible" :size="isMobile ? \'full\' : \'tiny\'" top="30%" custom-class="unCertification-dialog"></el-dialog>\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("ä¸‹å›¾åˆ†åˆ«æ˜¯ PC ç«¯å’Œç§»åŠ¨çŸ­çš„è¡¨ç°å½¢å¼ï¼Œç„¶åé…åˆ CSS åª’ä½“æŸ¥è¯¢å®ç°å„ç§å¸ƒå±€")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/aVp1YC8UV0cHx6kEIFfVV2Jo5lwyicic3pmib4BBBHvxQnfQDXWx2UQJ6W8ib5wibDHPvNwN1R6hGPgPX8wHdbUM3YA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"img"}})]),e._v(" "),s("p",[s("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/aVp1YC8UV0cHx6kEIFfVV2Jo5lwyicic3p8lbYhfTpia3HI7EKjxwDvfAgvjKmkO3WYQrmUSNLd4y6WnZXATyM2pQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"img"}})]),e._v(" "),s("p",[e._v("å¼€å‘ç›¸å…³é…ç½®")]),e._v(" "),s("p",[s("strong",[e._v("åå‘ä»£ç†")])]),e._v(" "),s("p",[e._v("åœ¨é¡¹ç›®ç›®å½•çš„ "),s("code",[e._v("config")]),e._v(" æ–‡ä»¶ä¸‹é¢çš„ "),s("code",[e._v("index.js")]),e._v(" é…ç½®æˆ‘ä»¬çš„æœ¬åœ°åå‘ä»£ç†å’Œç«¯å£ä¿¡æ¯")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("dev: {  env: require('./dev.env'),  port: 80,  autoOpenBrowser: true,  assetsSubDirectory: 'static',  assetsPublicPath: '/',  proxyTable: {    '/api/profile': {      target: '[çœŸå®æ¥å£åœ°å€]:[ç«¯å£å·]', // ä¾‹å¦‚ï¼š http://api.xxx.com      changeOrigin: true,      pathRewrite: {        '^/api/profile': '/profile'      }    }    ...  },\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("ç„¶åæˆ‘ä»¬è°ƒç”¨æ¥å£çš„å½¢å¼å°±ä¼šå˜æˆå¦‚ä¸‹æ˜ å°„ï¼Œå½“æˆ‘ä»¬è°ƒç”¨ "),s("code",[e._v("/api/profile/xxxx")]),e._v(" çš„æ—¶å€™ï¼Œå…¶å®æ˜¯è°ƒç”¨äº† "),s("code",[e._v("[çœŸå®æ¥å£åœ°å€]/profile/xxxx")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("/api/profile/xxxx => [çœŸå®æ¥å£åœ°å€]/profile/xxxx\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[s("strong",[e._v("nginx é…ç½®")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("upstream api.xxx.com{ #ip_hash;  server [æ¥å£æœåŠ¡å™¨ ip åœ°å€]:[ç«¯å£];}server {  ...  location ^~ /api/profile {    index index.php index.html index.html;    proxy_redirect off;    proxy_set_header Host $host;    proxy_set_header X-Real-IP $remote_addr;    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;    proxy_pass http://api.xxx.com;    rewrite ^/api/profile/(.*)$ /profile/$1 break;  }  ...}\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[s("strong",[e._v("çº¿ä¸Šéƒ¨ç½²")])]),e._v(" "),s("p",[e._v("å¦‚æœè·¯ç”±ä½¿ç”¨çš„æ˜¯ "),s("code",[e._v("history")]),e._v(" æ¨¡å¼çš„è¯ï¼Œéœ€è¦åœ¨ "),s("code",[e._v("nginx")]),e._v(" é‡Œé¢é…ç½®å°†æ‰€æœ‰çš„è¯·æ±‚åˆ°è½¬å‘åˆ° "),s("code",[e._v("index.html")]),e._v(" å»")]),e._v(" "),s("p",[e._v("åœ¨ "),s("code",[e._v("nginx.conf")]),e._v(" æˆ–è€…å¯¹åº”çš„ç«™ç‚¹ "),s("code",[e._v("vhost")]),e._v(" æ–‡ä»¶ä¸‹é¢é…ç½®")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("location / {    try_files $uri $uri/ /index.html;}\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("h4",{attrs:{id:"ä¼˜åŒ–"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¼˜åŒ–","aria-hidden":"true"}},[e._v("#")]),e._v(" ä¼˜åŒ–")]),e._v(" "),s("p",[s("strong",[e._v("å¼€å¯é™æ€èµ„æºé•¿ç¼“å­˜")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("location ~ .*\\.(gif|jpg|jpeg|png|bmp|swf|woff|ttf|eot|svg)$ {    expires 1y;}location ~ .*\\.(js|css)$ {    expires 1y;}\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[s("strong",[e._v("å¼€å¯é™æ€èµ„æº gzip å‹ç¼©")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("// æ‰¾åˆ° nginx.conf é…ç½®æ–‡ä»¶vim /data/nginx/conf/nginx.confgzip on;gzip_min_length  1k;gzip_buffers     4 8k;gzip_http_version 1.1;gzip_types text/plain application/javascript application/x-javascript text/javascript text/xml text/css;\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("å¼€å¯äº† gzip å‹ç¼©ä¹‹åï¼Œé¡µé¢èµ„æºè¯·æ±‚å¤§å°å°†å¤§å¤§å‡å°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¡¨ç¤ºå·²ç»å¼€å¯äº† "),s("code",[e._v("gzip")]),e._v("å‹ç¼©")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/aVp1YC8UV0cHx6kEIFfVV2Jo5lwyicic3pxBIBMrFYgJrpicialrfhgEhhDiarpzWibLBKXJdvONyt6ajFgjXLicqL9ibQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"img"}})]),e._v(" "),s("h4",{attrs:{id:"q-a"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#q-a","aria-hidden":"true"}},[e._v("#")]),e._v(" Q&A")]),e._v(" "),s("p",[e._v("æ–‡ç« åˆ°è¿™å°±ç»“æŸäº†ï¼Œå¦‚æœæœ‰é—æ¼æˆ–è€…é”™è¯¯çš„åœ°æ–¹ï¼Œæ¬¢è¿ç§ä¿¡æŒ‡å‡ºã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸¦ç»™å¤§å®¶ä¸€ä¸ä¸æ”¶è·ã€‚")]),e._v(" "),s("hr")])}],!1,null,null,null);i.options.__file="vue2.0 é¡¹ç›®å¼€å‘å°ç»“.md";t.default=i.exports}}]);