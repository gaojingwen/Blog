(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{102:function(e,v,_){"use strict";_.r(v);var p=_(0),t=Object(p.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,v=e.$createElement,_=e._self._c||v;return _("div",{staticClass:"content"},[_("h1",{attrs:{id:"åŸºäº-webpack-çš„å‰åç«¯åˆ†ç¦»å¼€å‘ç¯å¢ƒå®è·µ"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#åŸºäº-webpack-çš„å‰åç«¯åˆ†ç¦»å¼€å‘ç¯å¢ƒå®è·µ","aria-hidden":"true"}},[e._v("#")]),e._v(" åŸºäº webpack çš„å‰åç«¯åˆ†ç¦»å¼€å‘ç¯å¢ƒå®è·µ")]),e._v(" "),_("p",[e._v("[å‰ç«¯å¤§å­¦](javascript:void(0)ğŸ˜‰ "),_("em",[e._v("4æœˆ10æ—¥")])]),e._v(" "),_("blockquote",[_("p",[e._v("æ¥æºï¼šä»Šæ—¥å¤´æ¡æŠ€æœ¯åšå®¢")])]),e._v(" "),_("p",[_("strong",[e._v("èƒŒæ™¯")])]),e._v(" "),_("p",[e._v("éšç€äº’è”ç½‘åº”ç”¨å·¥ç¨‹è§„æ¨¡çš„æ—¥ç›Šå¤æ‚åŒ–å’Œç²¾ç»†åŒ–ï¼Œæˆ‘ä»¬åœ¨å¼€å‘ä¸€ä¸ªæ ‡å‡†webåº”ç”¨çš„æ—©å·²å¼€å§‹å‘Šåˆ«å•å¹²æ¨¡å¼ï¼Œä¸ºäº†æå‡å¼€å‘æ•ˆç‡ï¼Œå‰åç«¯åˆ†ç¦»çš„éœ€æ±‚è¶Šæ¥è¶Šè¢«é‡è§†ï¼Œå‰ç«¯è´Ÿè´£å±•ç°/äº¤äº’é€»è¾‘ï¼Œåç«¯è´Ÿè´£ä¸šåŠ¡/æ•°æ®æ¥å£ï¼ŒåŸºæœ¬ä¸Šä¹Ÿæˆä¸ºäº†æˆ‘ä»¬æ—¥å¸¸é¡¹ç›®åˆ†å·¥ä¸­çš„æ ‡é…ï¼Œä½†æ˜¯å‰åç«¯åˆ†ç¦»ä¸€ç›´ä»¥æ¥éƒ½æ˜¯ä¸€ä¸ªå·¥ç¨‹æ¦‚å¿µï¼Œæ¯ä¸ªå›¢é˜Ÿåœ¨å®ç°å·¥ç¨‹ä¸­éƒ½ä¼šåŸºäºè‡ªèº«çš„æŠ€æœ¯æ ˆé€‰æ‹©å’Œå¼€å‘ç¯å¢ƒè¿›è¡Œå…·ä½“çš„å®ç°ï¼Œæœ¬æ–‡ä¾¿æ ¹æ®è‡ªèº«å›¢é˜Ÿåœ¨webapckå¼€å‘ä¸­æ­å»ºçš„å‰åç«¯åˆ†ç¦»å¼€å‘ç¯å¢ƒè¿›è¡Œéƒ¨åˆ†å™è¿°ã€‚")]),e._v(" "),_("p",[_("strong",[e._v("ç†æƒ³åŒ–çš„å‰åç«¯åˆ†ç¦»ç¯å¢ƒ")])]),e._v(" "),_("p",[e._v("ç›®å‰ä¸šç•Œæ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„å‰åç«¯åˆ†ç¦»çš„ä¾‹å­æ˜¯SPA(Single-page application)ï¼Œæ‰€æœ‰ç”¨åˆ°çš„å±•ç°æ•°æ®éƒ½æ˜¯åç«¯é€šè¿‡å¼‚æ­¥æ¥å£(AJAX/JSONP/WEBSOCKET)çš„æ–¹å¼æä¾›çš„ï¼Œç°å¦‚ä»Šæœ€ç«çš„å‰ç«¯æ¡†æ¶å¦‚ï¼šReactï¼Œ Vueï¼ŒAngularç­‰ä¹Ÿéƒ½æ¨èé‡‡ç”¨SPAçš„æ¨¡å¼è¿›è¡Œå¼€å‘å¹¶ä¸”ä»ç»„ä»¶åŒ–ï¼Œæ•°æ®æµï¼ŒçŠ¶æ€å®¹å™¨å†åˆ°ç½‘ç»œè¯·æ±‚ï¼Œå•é¡µè·¯ç”±ç­‰éƒ½ç»™å‡ºäº†å®Œå–„çš„å…¨å®¶æ¡¶æ–¹æ¡ˆã€‚ä»æŸç§æ„ä¹‰ä¸Šæ¥è¯´ï¼ŒSPAç¡®å®åšåˆ°äº†å‰åç«¯åˆ†ç¦»ï¼Œä½†è¿™ç§æ–¹å¼å­˜åœ¨å¦‚ä¸‹å‡ ä¸ªäºŸå¾…é—®é¢˜ï¼š")]),e._v(" "),_("ul",[_("li",[e._v("å‰ç«¯å¼€å‘æœ¬åœ°å¼€å‘ç¯å¢ƒä¸‹è¯¥å¦‚ä½•çªç ´åŸŸçš„é™åˆ¶å’ŒæœåŠ¡ç«¯æ¥å£è¿›è¡Œé€šä¿¡ï¼Ÿ")]),e._v(" "),_("li",[e._v("ä¸€æ¡å‘½ä»¤ï¼Œèƒ½å¦åŒæ—¶å®Œæˆwebpackå’Œnode serverçš„å¯åŠ¨ï¼Ÿ")]),e._v(" "),_("li",[e._v("å¼€å‘ç¯å¢ƒä¸‹çš„å‰ç«¯èµ„æºè·¯å¾„åº”è¯¥å¦‚ä½•é…ç½®ï¼Ÿ")]),e._v(" "),_("li",[e._v("mockæ•°æ®åº”è¯¥æ€ä¹ˆåšï¼Ÿ")]),e._v(" "),_("li",[e._v("æ‰“åŒ…æ„å»ºåçš„æ–‡ä»¶èƒ½å¦ç›´æ¥é¢„è§ˆæ•ˆæœï¼Ÿ")])]),e._v(" "),_("p",[e._v("é’ˆå¯¹ä»¥ä¸Šçš„é—®é¢˜ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æ€æ ·åˆ©ç”¨webpackç°æœ‰çš„ä¸€äº›æœºåˆ¶å’Œå€ŸåŠ©nodeçš„ç¯å¢ƒæ­é…æ¥è¿›è¡Œé€ä¸ªå‡»ç ´ï¼Œå…·ä½“è®¾è®¡è§ä¸‹å›¾ï¼š")]),e._v(" "),_("p",[_("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_jpg/zPh0erYjkib1ANRIb98ZRKrZ03Xbc7UocDGun6V4ZqYEibGUNpW8czpQOT1sRhjHiakugvmgPcau66I7XhG9y6F1w/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"img"}})]),e._v(" "),_("p",[e._v("ç”±æ­¤å¯è§ï¼Œæˆ‘ä»¬ç†æƒ³åŒ–çš„å¼€å‘ç¯å¢ƒåº”æ ¹æ®å…·å¤‡ä»¥ä¸‹å‡ ç‚¹è¦æ±‚ï¼š")]),e._v(" "),_("ul",[_("li",[e._v("æ“ä½œå¤Ÿç®€å•ï¼Œæ‹‰ä¸‹ä»£ç åï¼Œåªéœ€è¦è®°ä½ä»…æœ‰çš„å‡ ä¸ªå‘½ä»¤å°±èƒ½ç›´æ¥è¿›å…¥å¼€å‘çŠ¶æ€")]),e._v(" "),_("li",[e._v("è§£è€¦å¤Ÿå½»åº•ï¼Œå¼€å‘è€…åªéœ€è¦ä¿®æ”¹è·¯ç”±é…ç½®è¡¨å°±èƒ½æ— ç¼åœ¨å¤šä¸ªè¯·æ±‚æ¥å£ä¸­çµæ´»åˆ‡æ¢")]),e._v(" "),_("li",[e._v("èµ„æºå¤Ÿæ¸…æ™°ï¼Œæ‰€æœ‰çš„å¼€å‘èµ„æºéƒ½èƒ½åˆ°ç²¾ç¡®å¯æ§ï¼ŒåŒæ—¶æ”¯æŒä¸€é”®æ‰“åŒ…æ„å»ºï¼Œå•é¡µå’Œå¤šé¡µæ¨¡å¼å¯å¹¶å­˜")]),e._v(" "),_("li",[e._v("é…ç½®å¤Ÿçµæ´»ï¼Œå¯ä»¥æ ¹æ®è‡ªèº«é¡¹ç›®çš„å®é™…æƒ…å†µçµæ´»æ·»åŠ å„ç±»ä¸­é—´ä»¶ï¼Œæ‰©å±•æ¨¡å—å’Œç¬¬ä¸‰æ–¹æ’ä»¶")])]),e._v(" "),_("p",[_("strong",[e._v("ä¸å¾—ä¸æçš„webpack-dev-server")])]),e._v(" "),_("p",[e._v("webpackæœ¬èº«çš„å®šä½æ˜¯ä¸€ä¸ªèµ„æºç®¡ç†å’Œæ‰“åŒ…æ„å»ºå·¥ä½œï¼Œæœ¬èº«çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå¯¹å„ç§é™æ€èµ„æºçš„ä¾èµ–åˆ†æå’Œé¢„ç¼–è¯‘ï¼Œåœ¨å®é™…å¼€å‘ä¸­å®˜æ–¹è¿˜æ¨èäº†ä¸€ä¸ªå¿«é€Ÿè¯»å–webpacké…ç½®çš„serverç¯å¢ƒwebpack-dev-serverï¼Œå®˜æ–¹çš„ä»‹ç»æ˜¯ï¼šâ€Use webpack with a development server that provides live reloading. The webpack-dev-server is a little Node.js Express server, which uses the webpack-dev-middleware to serve a webpack bundle. It also has a little runtime which is connected to the server via Sock.js.â€ï¼Œä¸€ä¸ªé€‚ç”¨äºå¼€å‘ç¯å¢ƒçš„ï¼ŒåŸºäºexpress + webpack-dev-middlewareå®ç°çš„ï¼Œæ”¯æŒå®æ—¶æ›´æ–°ï¼Œå†…å­˜æ„å»ºèµ„æºçš„å¼€å‘æœåŠ¡å™¨ï¼Œé€šè¿‡ç®€å•çš„é…ç½®å³å¯æ»¡è¶³webpackå¼€å‘ç¯å¢ƒä¸­çš„ä¸€ç³»åˆ—éœ€æ±‚ï¼Œä½†æ˜¯å½“æˆ‘ä»¬çš„å¼€å‘ç¯å¢ƒæ—¥è¶‹å¤æ‚å’Œå¤šæ ·çš„æ—¶å€™ï¼Œä¸ä»…éœ€è¦å¯¹è‡ªå®šä¹‰é…ç½®çš„ç»†èŠ‚çµæ´»å¯æ§ï¼ŒåŒæ—¶éœ€è¦å¯¹è¿›è¡ŒåŠ å…¥å„ç§ç¬¬ä¸‰æ–¹çš„æ’ä»¶è¿›è¡ŒåŠŸèƒ½æ‰©å±•ï¼Œæ‰èƒ½æœ€å¤§ç¨‹åº¦çš„å‘æŒ¥webpackç¯å¢ƒä¸­çš„å¨åŠ›ã€‚")]),e._v(" "),_("p",[_("strong",[e._v("æ‰“é€ é¡¹ç›®ä¸“å±çš„å‰ç«¯å¼€å‘ç¯å¢ƒ")])]),e._v(" "),_("p",[e._v("æœ‰äº†ç†æƒ³ç¯å¢ƒä¸‹çš„çš„è¿°æ±‚ï¼Œä¹Ÿäº†è§£åˆ°äº†webpack-dev-serverçš„å®ç°ç²¾é«“ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸€æ­¥æ­¥åœ°æ¥æ‰“é€ ä¸“å±è‡ªèº«çš„å¼€å‘ç¯å¢ƒï¼š")]),e._v(" "),_("p",[_("strong",[e._v("ä¸€ ã€å€ŸåŠ©nodeå’Œhttp-proxyå®ç°è·¨åŸŸé€šä¿¡")])]),e._v(" "),_("p",[e._v("å‰åç«¯åˆ†ç¦»å¼€å‘ä¸­ï¼Œæœ¬åœ°å‰ç«¯å¼€å‘è°ƒç”¨æ¥å£ä¼šæœ‰è·¨åŸŸé—®é¢˜ï¼Œä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ç§è§£å†³æ–¹æ³•ï¼š")]),e._v(" "),_("ul",[_("li",[e._v("ç›´æ¥å¯åŠ¨æœåŠ¡ç«¯é¡¹ç›®ï¼Œå†å°†é¡¹ç›®ä¸­çš„èµ„æºurlæŒ‡å‘åˆ°å‰ç«¯æœåŠ¡ä¸­çš„é™æ€èµ„æºåœ°å€ï¼Œå¥½å¤„åœ¨äºå› ä¸ºå§‹ç»ˆåœ¨æœåŠ¡ç«¯çš„ç¯å¢ƒä¸­è¿›è¡Œèµ„æºè°ƒè¯•ï¼Œä¸å­˜åœ¨æ¥å£çš„è·¨åŸŸè®¿é—®é—®é¢˜ï¼Œä½†æ˜¯ç¼ºé™·ä¹Ÿæ¯”è¾ƒæ˜æ˜¾ï¼Œéœ€è¦åŒæ—¶å¯åŠ¨ä¸¤å¥—ç¯å¢ƒï¼Œè¿˜éœ€è¦å€ŸåŠ©nginxï¼Œcharlesç­‰å·¥å…·è¿›è¡Œèµ„æºåœ°å€çš„ä»£ç†è½¬å‘ï¼Œé…ç½®æ¯”è¾ƒç¹çï¼Œå¯¹å¼€å‘è€…å¯¹ç½‘ç»œçš„ç†è§£å’Œç¯å¢ƒé…ç½®è¦æ±‚è¾ƒé«˜ï¼Œèµ„æºå¼€é”€ä¹Ÿå¤§ï¼›")]),e._v(" "),_("li",[e._v("CORSè·¨åŸŸï¼šåç«¯æ¥å£åœ¨è¿”å›çš„æ—¶å€™ï¼Œåœ¨headerä¸­åŠ å…¥â€™Access-Control-Allow-originâ€™ğŸ˜— ç­‰é…ç½®ï¼Œåˆ©ç”¨è·¨åŸŸèµ„æºå…±äº«å®ç°è·¨åŸŸï¼Œå‰ç«¯éƒ¨åˆ†åªè¦æ±‚æ”¯æŒxhr2æ ‡å‡†çš„æµè§ˆå™¨ï¼Œä½†æ˜¯æœåŠ¡ç«¯åœ¨è¯·æ±‚å¤´ä¸­éœ€è¦åœ¨headerä¸­åšå“åº”å¤´é…ç½®ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šè¿˜æ˜¯å¯¹æœåŠ¡ç«¯çš„æ¥å£è®¾ç½®æœ‰ä¸€å®šçš„ä¾èµ–ï¼›")]),e._v(" "),_("li",[e._v("http-proxyï¼šç”¨nodejsæ­å»ºæœ¬åœ°httpæœåŠ¡å™¨ï¼Œå¹¶ä¸”åˆ¤æ–­è®¿é—®æ¥å£URLæ—¶è¿›è¡Œè½¬å‘ï¼Œç”±äºåˆ©ç”¨äº†http-proxyæ­£å‘ä»£ç†çš„æ¨¡å¼è¿›è¡Œäº†è½¬å‘ï¼Œé‡‡ç”¨çš„æ˜¯æœåŠ¡å¯¹æœåŠ¡çš„æ¨¡å¼ï¼Œèƒ½è¾ƒä¸ºå®Œç¾è§£å†³æœ¬åœ°å¼€å‘æ—¶å€™çš„è·¨åŸŸé—®é¢˜ï¼Œä¹Ÿæ˜¯æœ¬æ–‡ä¸­æ¨èçš„æ–¹å¼ï¼Œé…ç½®å¦‚ä¸‹ï¼š")])]),e._v(" "),_("p",[e._v("1ã€æ­å»ºnodeå’Œhttp-proxyç¯å¢ƒ")]),e._v(" "),_("blockquote",[_("p",[e._v("npm install express # expressä½œä¸ºnodeåŸºç¡€æœåŠ¡æ¡†æ¶")]),e._v(" "),_("p",[e._v("npm install http-proxy-middleware # http-proxyçš„expressä¸­é—´ä»¶")]),e._v(" "),_("p",[e._v("npm install body-parser # bodyParserä¸­é—´ä»¶ç”¨æ¥è§£æhttpè¯·æ±‚ä½“")]),e._v(" "),_("p",[e._v("npm install querystring    # querystringç”¨æ¥å­—ç¬¦ä¸²åŒ–å¯¹è±¡æˆ–è§£æå­—ç¬¦ä¸²")])]),e._v(" "),_("p",[e._v("å·¥ç¨‹é¡¹ç›®ä¸‹å¯ä»¥æ–°å»ºä¸€ä¸ªserverçš„æ–‡ä»¶å¤¹æ”¾ç½®nodeèµ„æºï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š > server")]),e._v(" "),_("p",[e._v("â”œâ”€â”€ main.js â”œâ”€â”€ proxy.config.js â”œâ”€â”€ routes â””â”€â”€ views")]),e._v(" "),_("p",[e._v("2ã€ç¼–å†™ä»£ç†é…ç½®è„šæœ¬ï¼š")]),e._v(" "),_("p",[e._v("proxy.config.jsä¸­å¯ä»¥é…ç½®å¯¹åº”éœ€è¦ä»£ç†çš„urlå’Œç›®æ ‡urlï¼Œå¦‚ä¸‹ï¼š")]),e._v(" "),_("blockquote",[_("p",[e._v("const proxy = [")]),e._v(" "),_("p",[e._v("{")]),e._v(" "),_("p",[e._v("â€‹    url: '/back_end/auth/*',")]),e._v(" "),_("p",[e._v("â€‹    target: 'http://10.2.0.1:8351'")]),e._v(" "),_("p",[e._v("},")]),e._v(" "),_("p",[e._v("{")]),e._v(" "),_("p",[e._v("â€‹    url: '/back_end/*',")]),e._v(" "),_("p",[e._v("â€‹    target: 'http://10.2.0.1:8352'")]),e._v(" "),_("p",[e._v("}")]),e._v(" "),_("p",[e._v("];")]),e._v(" "),_("p",[e._v("module.exports = proxy;")])]),e._v(" "),_("p",[e._v("main.jsä¸­çš„é…ç½®å¦‚ä¸‹ï¼š")]),e._v(" "),_("blockquote",[_("p",[e._v("const express = require('express')")]),e._v(" "),_("p",[e._v("const bodyParser = require('body-parser')")]),e._v(" "),_("p",[e._v("const proxy = require('http-proxy-middleware')")]),e._v(" "),_("p",[e._v("const querystring = require('querystring')")]),e._v(" "),_("p",[e._v("const app = express()")]),e._v(" "),_("p",[e._v("// make http proxy middleware setting")]),e._v(" "),_("p",[e._v("const createProxySetting = function (url) {")]),e._v(" "),_("p",[e._v("return {")]),e._v(" "),_("p",[e._v("â€‹    target: url,")]),e._v(" "),_("p",[e._v("â€‹    changeOrigin: true,")]),e._v(" "),_("p",[e._v("â€‹    headers: {")]),e._v(" "),_("p",[e._v("â€‹      Accept: 'application/json',")]),e._v(" "),_("p",[e._v("â€‹      'X-Requested-With': 'XMLHttpRequest'")]),e._v(" "),_("p",[e._v("â€‹    },")]),e._v(" "),_("p",[e._v("â€‹    onProxyReq: function (proxyReq, req) {")]),e._v(" "),_("p",[e._v("â€‹      if (req.method === 'POST' && req.body) {")]),e._v(" "),_("p",[e._v("â€‹        const bodyData = querystring.stringify(req.body)")]),e._v(" "),_("p",[e._v("â€‹        proxyReq.write(bodyData)")]),e._v(" "),_("p",[e._v("â€‹      }")]),e._v(" "),_("p",[e._v("â€‹    }")]),e._v(" "),_("p",[e._v("}")]),e._v(" "),_("p",[e._v("}")]),e._v(" "),_("p",[e._v("// parse application/json")]),e._v(" "),_("p",[e._v("app.use(bodyParser.json())")]),e._v(" "),_("p",[e._v("// parse application/x-www-form-urlencoded")]),e._v(" "),_("p",[e._v("app.use(bodyParser.urlencoded({ extended: false }))")]),e._v(" "),_("p",[e._v("// proxy")]),e._v(" "),_("p",[e._v("proxyConfig.forEach(function (item) {")]),e._v(" "),_("p",[e._v("app.use(item.url, proxy(createProxySetting(item.target)))")]),e._v(" "),_("p",[e._v("})")]),e._v(" "),_("p",[e._v("// eg: http://127.0.0.1:3000/back_end/oppor => http://10.2.0.1:8352/back_end/oppor")])]),e._v(" "),_("p",[e._v("é€šè¿‡ä»¥ä¸Šçš„é…ç½®æˆ‘ä»¬å°±èƒ½è½»æ¾å°†æŒ‡å®šurlä¸‹çš„è¯·æ±‚è‡ªåŠ¨è½¬å‘åˆ°åŒ¹é…æˆåŠŸçš„ç›®æ ‡æ¥å£ä¸‹ã€‚")]),e._v(" "),_("p",[e._v("NODE_ENV=development node ./bin/dev-server.js")]),e._v(" "),_("p",[e._v("isDebug: true [HPM] Proxy created: / -> http://10.2.0.1:8351 [HPM] Proxy created: / -> http://10.2.0.1:8352 Listening at 192.168.1.104:3000")]),e._v(" "),_("p",[e._v("webpack built d558389f7a9a453af17f in 2018ms Hash: d558389f7a9a453af17f Version: webpack 1.14.0 Time: 2018ms")]),e._v(" "),_("p",[_("strong",[e._v("äºŒã€å°†webpacké…ç½®å’Œnode serverè¿›ç¨‹æ‰“é€š")])]),e._v(" "),_("p",[e._v("1ã€è§£è€¦webpackä¸­çš„é…ç½®")]),e._v(" "),_("p",[e._v("ç”±äºwebpackåœ¨å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒä¸­ç»å¸¸éœ€è¦åšå„ç§é…ç½®çš„åˆ‡æ¢ï¼Œå®˜æ–¹ä¹Ÿæä¾›äº†DefinePluginæ¥è¿›è¡Œç¯å¢ƒå‚æ•°è®¾ç½®ï¼Œä½†æ˜¯å¤§é‡çš„åˆ¤æ–­è¯­å¥ä¾µå…¥webpack.configä¸­å…¶å®ä¼šå¯¼è‡´ä»£ç çš„å¯è¯»æ€§å’Œå¤ç”¨æ€§å˜å·®ï¼Œä¹Ÿå®¹æ˜“é€ æˆä»£ç å†—ä½™ï¼Œæˆ‘ä»¬åœ¨æ­¤å¯ä»¥å¯¹é…ç½®æ–‡ä»¶è¿›è¡Œé‡æ„ï¼Œå°†ä¹‹å‰çš„webpacké…ç½®æ–‡ä»¶æ‹†è§£æˆäº†webpack.config.jsï¼Œproject.config.jså’Œenvironments.config.jsä¸‰ä¸ªæ–‡ä»¶ï¼Œä¸‰ä¸ªæ–‡ä»¶å„å¸å…¶èŒï¼Œåˆå¯äº’ç›¸åä½œï¼Œå‡å°‘ç»´æŠ¤æˆæœ¬ï¼Œå¦‚ä¸‹ï¼š")]),e._v(" "),_("ul",[_("li",[e._v("environments.config.js: ä¸»è¦çš„ä½œç”¨å°±æ˜¯å­˜æ”¾åœ¨ç‰¹å®šç¯å¢ƒä¸‹çš„éœ€è¦å˜åŒ–çš„é…ç½®å‚æ•°ï¼ŒåŒ…å«æœ‰ï¼špublicpath, devtools, waningsï¼Œhashç­‰")]),e._v(" "),_("li",[e._v("project.config.jsï¼šä¸»è¦çš„ä½œç”¨æ˜¯å­˜æ”¾äºé¡¹ç›®æœ‰å…³çš„åŸºç¡€é…ç½®ï¼Œå¦‚ï¼šserverï¼Œoutputï¼Œloaderï¼Œexternalsï¼Œpluginç­‰åŸºç¡€é…ç½®ï¼›é€šè¿‡ä¸€ä¸ªoverrideså®ç°å¯¹environmentsä¸­çš„é…ç½®ä¿¡æ¯é‡è½½ã€‚")]),e._v(" "),_("li",[e._v("webpack.config.jsï¼šä¸»è¦æ˜¯è¯»å–project.config.jsä¸­çš„é…ç½®ï¼Œå†æŒ‰æ ‡å‡†çš„webpackå­—æ®µå¡«å…¥projectä¸­çš„é…ç½®ä¿¡æ¯ï¼ŒåŸåˆ™ä¸Šæ˜¯è¯¥æ–‡ä»¶çš„ä¿¡æ¯åªä¸æ„å»ºå·¥å…·æœ‰å…³ï¼Œè€Œä¸å…·ä½“çš„é¡¹ç›®å·¥ç¨‹æ— å…³ï¼Œå¯ä»¥åšåˆ°è·¨é¡¹ç›®é—´å¤ç”¨ã€‚")])]),e._v(" "),_("p",[e._v("> config â”œâ”€â”€ environments.config.js â”œâ”€â”€ project.config.js â””â”€â”€ webpack.config.js")]),e._v(" "),_("p",[e._v("environments.config.jsä¸­çš„å…³é”®å®ç°ï¼š")]),e._v(" "),_("blockquote",[_("p",[e._v("// Here is where you can define configuration overrides based on the execution environment.")]),e._v(" "),_("p",[e._v("// Supply a key to the default export matching the NODE_ENV that you wish to target, and")]),e._v(" "),_("p",[e._v("// the base configuration will apply your overrides before exporting itself.")]),e._v(" "),_("p",[e._v("module.exports = {")]),e._v(" "),_("p",[e._v("// ======================================================")]),e._v(" "),_("p",[e._v("// Overrides when NODE_ENV === 'development'")]),e._v(" "),_("p",[e._v("// ======================================================")]),e._v(" "),_("p",[e._v("development : (config) => ({")]),e._v(" "),_("p",[e._v("â€‹    compiler_public_path : "),_("code",[e._v("http://${config.server_host}:${config.server_port}/")])]),e._v(" "),_("p",[e._v("}),")]),e._v(" "),_("p",[e._v("// ======================================================")]),e._v(" "),_("p",[e._v("// Overrides when NODE_ENV === 'production'")]),e._v(" "),_("p",[e._v("// ======================================================")]),e._v(" "),_("p",[e._v("production : (config) => ({")]),e._v(" "),_("p",[e._v("â€‹    compiler_base_route      : '/apps/',")]),e._v(" "),_("p",[e._v("â€‹    compiler_public_path     : '/static/',")]),e._v(" "),_("p",[e._v("â€‹    compiler_fail_on_warning : false,")]),e._v(" "),_("p",[e._v("â€‹    compiler_hash_type       : 'chunkhash',")]),e._v(" "),_("p",[e._v("â€‹    compiler_devtool         : false,")]),e._v(" "),_("p",[e._v("â€‹    compiler_stats           : {")]),e._v(" "),_("p",[e._v("â€‹      chunks       : true,")]),e._v(" "),_("p",[e._v("â€‹      chunkModules : true,")]),e._v(" "),_("p",[e._v("â€‹      colors       : true")]),e._v(" "),_("p",[e._v("â€‹    }")]),e._v(" "),_("p",[e._v("})")]),e._v(" "),_("p",[e._v("}")])]),e._v(" "),_("p",[e._v("project.config.jsä¸­çš„å…³é”®å®ç°ï¼š")]),e._v(" "),_("blockquote",[_("p",[e._v("// project.config.js")]),e._v(" "),_("p",[e._v("const config = {")]),e._v(" "),_("p",[e._v("env : process.env.NODE_ENV || 'development',")]),e._v(" "),_("p",[e._v("// ----------------------------------")]),e._v(" "),_("p",[e._v("// Project Structure")]),e._v(" "),_("p",[e._v("// ----------------------------------")]),e._v(" "),_("p",[e._v("path_base  : path.resolve(__dirname, '..'),")]),e._v(" "),_("p",[e._v("dir_client : 'src',")]),e._v(" "),_("p",[e._v("dir_dist   : 'dist',")]),e._v(" "),_("p",[e._v("dir_public : 'public',")]),e._v(" "),_("p",[e._v("dir_server : 'server',")]),e._v(" "),_("p",[e._v("dir_test   : 'tests',")]),e._v(" "),_("p",[e._v("// ----------------------------------")]),e._v(" "),_("p",[e._v("// Server Configuration")]),e._v(" "),_("p",[e._v("// ----------------------------------")]),e._v(" "),_("p",[e._v("server_host : ip.address(), // use string 'localhost' to prevent exposure on local network")]),e._v(" "),_("p",[e._v("server_port : process.env.PORT || 3000,")]),e._v(" "),_("p",[e._v("// ----------------------------------")]),e._v(" "),_("p",[e._v("// Compiler Configuration")]),e._v(" "),_("p",[e._v("// ----------------------------------")]),e._v(" "),_("p",[e._v("compiler_devtool         : 'source-map',")]),e._v(" "),_("p",[e._v("compiler_hash_type       : 'hash',")]),e._v(" "),_("p",[e._v("compiler_fail_on_warning : false,")]),e._v(" "),_("p",[e._v("compiler_quiet           : false,")]),e._v(" "),_("p",[e._v("compiler_public_path     : '/',")]),e._v(" "),_("p",[e._v("compiler_stats           : {")]),e._v(" "),_("p",[e._v("â€‹    chunks : false,")]),e._v(" "),_("p",[e._v("â€‹    chunkModules : false,")]),e._v(" "),_("p",[e._v("â€‹    colors : true")]),e._v(" "),_("p",[e._v("}")]),e._v(" "),_("p",[e._v("};")]),e._v(" "),_("p",[e._v("// åœ¨æ­¤é€šè¿‡è¯»å–ç¯å¢ƒå˜é‡è¯»å–environmentsä¸­å¯¹åº”çš„é…ç½®é¡¹ï¼Œå¯¹å‰é¢çš„é…ç½®é¡¹è¿›è¡Œè¦†ç›–")]),e._v(" "),_("p",[e._v("const environments = require('./environments.config')")]),e._v(" "),_("p",[e._v("const overrides = environments[config.env]")]),e._v(" "),_("p",[e._v("if (overrides) {")]),e._v(" "),_("p",[e._v("debug('Found overrides, applying to default configuration.')")]),e._v(" "),_("p",[e._v("Object.assign(config, overrides(config))")]),e._v(" "),_("p",[e._v("} else {")]),e._v(" "),_("p",[e._v("debug('No environment overrides found, defaults will be used.')")]),e._v(" "),_("p",[e._v("}")]),e._v(" "),_("p",[e._v("module.exports = config")])]),e._v(" "),_("p",[e._v("webpack.config.jsä¸­çš„å…³é”®å®ç°ï¼š")]),e._v(" "),_("blockquote",[_("p",[e._v("const webpack = require('webpack')")]),e._v(" "),_("p",[e._v("const project = require('./project.config')")]),e._v(" "),_("p",[e._v("const debug = require('debug')('app:config:webpack')")]),e._v(" "),_("p",[e._v("const UglifyJsParallelPlugin = require('webpack-uglify-parallel')")]),e._v(" "),_("p",[e._v("const "),_("strong",[e._v("DEV")]),e._v(" = project.globals."),_("strong",[e._v("DEV")])]),e._v(" "),_("p",[e._v("const "),_("strong",[e._v("PROD")]),e._v(" = project.globals."),_("strong",[e._v("PROD")])]),e._v(" "),_("p",[e._v("const webpackConfig = {")]),e._v(" "),_("p",[e._v("name    : 'client',")]),e._v(" "),_("p",[e._v("target  : 'web',")]),e._v(" "),_("p",[e._v("devtool : project.compiler_devtool,")]),e._v(" "),_("p",[e._v("resolve : {")]),e._v(" "),_("p",[e._v("â€‹    modules: [project.paths.client(), 'node_modules'],")]),e._v(" "),_("p",[e._v("â€‹    extensions: ['.web.js', '.js', '.jsx', '.json']")]),e._v(" "),_("p",[e._v("},")]),e._v(" "),_("p",[e._v("module : {}")]),e._v(" "),_("p",[e._v("}")]),e._v(" "),_("p",[e._v("if ("),_("strong",[e._v("DEV")]),e._v(") {")]),e._v(" "),_("p",[e._v("debug('Enabling plugins for live development (HMR, NoErrors).')")]),e._v(" "),_("p",[e._v("webpackConfig.plugins.push(")]),e._v(" "),_("p",[e._v("â€‹      new webpack.HotModuleReplacementPlugin()")]),e._v(" "),_("p",[e._v(")")]),e._v(" "),_("p",[e._v("} else if ("),_("strong",[e._v("PROD")]),e._v(") {")]),e._v(" "),_("p",[e._v("debug('Enabling plugins for production (UglifyJS).')")]),e._v(" "),_("p",[e._v("webpackConfig.plugins.push(")]),e._v(" "),_("p",[e._v("â€‹    new webpack.optimize.OccurrenceOrderPlugin(),")]),e._v(" "),_("p",[e._v("â€‹    new webpack.optimize.DedupePlugin(),")]),e._v(" "),_("p",[e._v("â€‹    new UglifyJsParallelPlugin({")]),e._v(" "),_("p",[e._v("â€‹      workers: os.cpus().length,")]),e._v(" "),_("p",[e._v("â€‹      mangle: true,")]),e._v(" "),_("p",[e._v("â€‹      compressor: {")]),e._v(" "),_("p",[e._v("â€‹        warnings: false,")]),e._v(" "),_("p",[e._v("â€‹        drop_debugger: true,")]),e._v(" "),_("p",[e._v("â€‹        dead_code: true")]),e._v(" "),_("p",[e._v("â€‹      }")]),e._v(" "),_("p",[e._v("â€‹    })")]),e._v(" "),_("p",[e._v(")")]),e._v(" "),_("p",[e._v("}")])]),e._v(" "),_("p",[e._v("ç”±æ­¤å¯çŸ¥ï¼Œä¸‰è€…é—´çš„æ³¨å…¥å…³ç³»å¦‚ä¸‹ï¼š")]),e._v(" "),_("p",[e._v("> environments -> project -> webpack")]),e._v(" "),_("p",[e._v("2ã€æ•´åˆwebpackåœ¨å¼€å‘ç¯å¢ƒä¸­ä¾èµ–çš„ä¸­é—´ä»¶")]),e._v(" "),_("p",[e._v("å‚è€ƒwebapck-dev-serverä¸­çš„å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥å°†webpack-dev-middlewareå’Œwebpack-hot-middlewareåŠ å…¥åˆ°æˆ‘ä»¬çš„expressé…ç½®ä¸­ï¼Œ")]),e._v(" "),_("blockquote",[_("p",[e._v("npm install webpack-dev-middleware")]),e._v(" "),_("p",[e._v("npm install webpack-hot-middleware")])]),e._v(" "),_("p",[e._v("å…·ä½“é…ç½®å¦‚ä¸‹ï¼š")]),e._v(" "),_("blockquote",[_("p",[e._v("const express = require('express')")]),e._v(" "),_("p",[e._v("const debug = require('debug')('app:server')")]),e._v(" "),_("p",[e._v("const webpack = require('webpack')")]),e._v(" "),_("p",[e._v("const webpackConfig = require('../config/webpack.config')")]),e._v(" "),_("p",[e._v("const project = require('../config/project.config')")]),e._v(" "),_("p",[e._v("const app = express()")]),e._v(" "),_("p",[e._v("// ------------------------------------")]),e._v(" "),_("p",[e._v("// Apply Webpack HMR Middleware")]),e._v(" "),_("p",[e._v("// ------------------------------------")]),e._v(" "),_("p",[e._v("if (project.env === 'development') {")]),e._v(" "),_("p",[e._v("const compiler = webpack(webpackConfig)")]),e._v(" "),_("p",[e._v("debug('Enabling webpack dev and HMR middleware')")]),e._v(" "),_("p",[e._v("app.use(require('webpack-dev-middleware')(compiler, {")]),e._v(" "),_("p",[e._v("â€‹    publicPath  : webpackConfig.output.publicPath,")]),e._v(" "),_("p",[e._v("â€‹    contentBase : project.paths.client(),")]),e._v(" "),_("p",[e._v("â€‹    hot         : true,")]),e._v(" "),_("p",[e._v("â€‹    quiet       : project.compiler_quiet,")]),e._v(" "),_("p",[e._v("â€‹    noInfo      : project.compiler_quiet,")]),e._v(" "),_("p",[e._v("â€‹    lazy        : false,")]),e._v(" "),_("p",[e._v("â€‹    stats       : project.compiler_stats")]),e._v(" "),_("p",[e._v("}))")]),e._v(" "),_("p",[e._v("// webpack_hmr")]),e._v(" "),_("p",[e._v("app.use(require('webpack-hot-middleware')(compiler, {")]),e._v(" "),_("p",[e._v("â€‹    path: '/__webpack_hmr'")]),e._v(" "),_("p",[e._v("}))")]),e._v(" "),_("p",[e._v("// proxy")]),e._v(" "),_("p",[e._v(".......")]),e._v(" "),_("p",[e._v("}")]),e._v(" "),_("p",[e._v("module.exports = app.listen(project.server_port, function (err) {")]),e._v(" "),_("p",[e._v("if (err) {")]),e._v(" "),_("p",[e._v("â€‹    console.log(err)")]),e._v(" "),_("p",[e._v("â€‹    return")]),e._v(" "),_("p",[e._v("}")]),e._v(" "),_("p",[e._v("var uri = project.server_host + ':' + project.server_port")]),e._v(" "),_("p",[e._v("console.log('Listening at ' + uri + 'n')")]),e._v(" "),_("p",[e._v("});")])]),e._v(" "),_("p",[e._v("è¿™æ ·å½“æˆ‘ä»¬æ‰§è¡Œä¸‹è¿°çš„æ—¶å€™ï¼Œå°±èƒ½ä¸€é”®å®ŒæˆwebpackåŸºç¡€é…ç½®ï¼Œçƒ­æ›´æ–°ä»¥åŠepxressæœåŠ¡çš„å¯åŠ¨ï¼Œå¹¶ä¸”å¯ä»¥å®Œå…¨æ ¹æ®expressçš„é…ç½®è¯´æ˜æ¥è‡ªå®šä¹‰æ‰©å±•æˆ‘ä»¬çš„å‰ç«¯å¼€å‘èµ„æºã€‚")]),e._v(" "),_("blockquote",[_("p",[e._v("ENV=development node ./bin/dev-server.js")])]),e._v(" "),_("p",[_("strong",[e._v("ä¸‰ã€å‰ç«¯èµ„æºè·¯å¾„è®¾è®¡")])]),e._v(" "),_("p",[e._v("å®é™…å¼€å‘ä¸­ï¼Œæ‰€æœ‰æ¶‰åŠåˆ°çš„å‰ç«¯èµ„æºæˆ‘ä»¬è¿›è¡Œå½’ç±»ä¸€èˆ¬ä¼šæœ‰å¦‚ä¸‹å‡ ç§ï¼š")]),e._v(" "),_("ul",[_("li",[e._v("htmlï¼šhtmlé¡µé¢ï¼Œç»“åˆåˆ°æœåŠ¡åä¸€èˆ¬ç§°ä¸ºæ¨¡æ¿èµ„æºï¼Œæ˜¯æ‰€æœ‰èµ„æºçš„å…¥å£å’Œç»“æœå‘ˆç°é¡µï¼›")]),e._v(" "),_("li",[e._v("jsï¼šjavascriptæ‰§è¡Œè„šæœ¬èµ„æºï¼ŒåŸºäºç°ä»£Javascriptæ¡†æ¶å¼€å‘åé€šå¸¸è¿˜éœ€è¦å€ŸåŠ©babelï¼Œtypescriptç­‰è¿›è¡Œç¼–è¯‘å¤„ç†ï¼Œåˆ†ä¸ºbuildå‰åbuildåä¸¤å¥—ä»£ç ï¼›")]),e._v(" "),_("li",[e._v("cssï¼šæ ·å¼èµ„æºï¼Œå¦‚æœé‡‡ç”¨äº†lessï¼Œsassç­‰å·¥å…·å¤„ç†åä¼šä¹Ÿä¼šä».lesså’Œ.sassç¼–è¯‘æˆ.cssæ–‡ä»¶;")]),e._v(" "),_("li",[e._v("static: é™æ€èµ„æºï¼Œé€šå¸¸ä¼šåŒ…å«æœ‰fontï¼Œimageï¼Œaudioï¼Œvideoç­‰é™æ€æ–‡ä»¶ï¼Œç»“åˆåˆ°æœåŠ¡æ¡†æ¶ä¸­ä¸€èˆ¬éœ€è¦è®¾å®šç‰¹å®šçš„è®¿é—®è·¯å¾„ï¼Œç›´æ¥è¯»å–æ–‡ä»¶åŠ è½½ã€‚")]),e._v(" "),_("li",[e._v("åœ¨wepbackçš„é…ç½®ä¸­ï¼Œå‰ç«¯èµ„æºè·¯å¾„æˆ‘ä»¬é€šå¸¸æ˜¯å€ŸåŠ©pathå’ŒpublicPath å¯¹æ„å»ºå‡ºæ¥çš„å‰ç«¯èµ„æºè¿›è¡Œç´¢å¼•ï¼Œç”±äºwebpacké‡‡ç”¨äº†åŸºäºå†…å­˜æ„å»ºçš„æ–¹å¼ï¼Œpathé€šå¸¸ç”¨æ¥ç”¨æ¥å­˜æ”¾æ‰“åŒ…åæ–‡ä»¶çš„è¾“å‡ºç›®å½•ï¼ŒpublicPathåˆ™ç”¨æ¥æŒ‡å®šèµ„æºæ–‡ä»¶å¼•ç”¨çš„è™šæ‹Ÿç›®å½•ï¼Œå…·ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼š")])]),e._v(" "),_("blockquote",[_("p",[e._v("module.exports = {")]),e._v(" "),_("p",[e._v('entry: path.join(__dirname,"src","entry.js"),')]),e._v(" "),_("p",[e._v("output: {")]),e._v(" "),_("p",[e._v("â€‹    /*")]),e._v(" "),_("p",[e._v("â€‹        webpack-dev-serverç¯å¢ƒä¸‹ï¼Œpathã€publicPathã€--content-base åŒºåˆ«ä¸è”ç³»")]),e._v(" "),_("p",[e._v("â€‹        pathï¼šæŒ‡å®šç¼–è¯‘ç›®å½•è€Œå·²ï¼ˆ/build/js/ï¼‰ï¼Œä¸èƒ½ç”¨äºhtmlä¸­çš„jså¼•ç”¨ã€‚")]),e._v(" "),_("p",[e._v("â€‹        publicPathï¼šè™šæ‹Ÿç›®å½•ï¼Œè‡ªåŠ¨æŒ‡å‘pathç¼–è¯‘ç›®å½•ï¼ˆ/assets/ => /build/js/ï¼‰ã€‚htmlä¸­å¼•ç”¨jsæ–‡ä»¶æ—¶ï¼Œå¿…é¡»å¼•ç”¨æ­¤è™šæ‹Ÿè·¯å¾„ï¼ˆä½†å®é™…ä¸Šå¼•ç”¨çš„æ˜¯å†…å­˜ä¸­çš„æ–‡ä»¶ï¼Œæ—¢ä¸æ˜¯/build/js/ä¹Ÿä¸æ˜¯/assets/ï¼‰ã€‚")]),e._v(" "),_("p",[e._v("â€‹        --content-baseï¼šå¿…é¡»æŒ‡å‘åº”ç”¨æ ¹ç›®å½•ï¼ˆå³index.htmlæ‰€åœ¨ç›®å½•ï¼‰ï¼Œä¸ä¸Šé¢ä¸¤ä¸ªé…ç½®é¡¹æ¯«æ— å…³è”ã€‚")]),e._v(" "),_("p",[e._v("â€‹        ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼")]),e._v(" "),_("p",[e._v("â€‹        å‘å¸ƒè‡³ç”Ÿäº§ç¯å¢ƒï¼š")]),e._v(" "),_("p",[e._v("â€‹        1.webpackè¿›è¡Œç¼–è¯‘ï¼ˆå½“ç„¶æ˜¯ç¼–è¯‘åˆ°/build/js/ï¼‰")]),e._v(" "),_("p",[e._v("â€‹        2.æŠŠç¼–è¯‘ç›®å½•ï¼ˆ/build/js/ï¼‰ä¸‹çš„æ–‡ä»¶ï¼Œå…¨éƒ¨å¤åˆ¶åˆ°/assets/ç›®å½•ä¸‹ï¼ˆæ³¨æ„ï¼šä¸æ˜¯å»ä¿®æ”¹index.htmlä¸­å¼•ç”¨bundle.jsçš„è·¯å¾„ï¼‰")]),e._v(" "),_("p",[e._v("â€‹    */")]),e._v(" "),_("p",[e._v('â€‹    path: path.join(__dirname,"build","js"),')]),e._v(" "),_("p",[e._v('â€‹    publicPath: "/assets/",')]),e._v(" "),_("p",[e._v('â€‹    //publicPath: "http://cdn.com/assets/",//ä½ ä¹Ÿå¯ä»¥åŠ ä¸Šå®Œæ•´çš„urlï¼Œæ•ˆæœä¸ä¸Šé¢ä¸€è‡´ï¼ˆä¸éœ€è¦ä¿®æ”¹index.htmlä¸­å¼•ç”¨bundle.jsçš„è·¯å¾„ï¼Œä½†å‘å¸ƒç”Ÿäº§ç¯å¢ƒæ—¶ï¼Œéœ€è¦ä½¿ç”¨æ’ä»¶æ‰èƒ½æ‰¹é‡ä¿®æ”¹å¼•ç”¨åœ°å€ä¸ºcdnåœ°å€ï¼‰ã€‚')]),e._v(" "),_("p",[e._v("â€‹    filename: 'bundle.js'")]),e._v(" "),_("p",[e._v("}")]),e._v(" "),_("p",[e._v("};")])]),e._v(" "),_("p",[e._v("æœ‰äº†å¦‚ä¸Šçš„æ¦‚å¿µï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†pathï¼Œpublicpathå’Œexpressä¸­çš„é…ç½®ç»“åˆèµ·æ¥ï¼ŒåŒæ—¶ç”±äºåœ¨å¼€å‘ç¯å¢ƒä¸­æˆ‘ä»¬çš„èµ„æºå…¥å£é€šå¸¸åˆä¼šæŒ‰ç‰¹å®šçš„ç›®å½•æ¥è¿›è¡Œæ–‡ä»¶å­˜æ”¾ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š")]),e._v(" "),_("p",[e._v("> project")]),e._v(" "),_("p",[e._v("â”œâ”€â”€ LICENSE â”œâ”€â”€ README.md â”œâ”€â”€ app.json â”œâ”€â”€ dist â”œâ”€â”€ bin â”œâ”€â”€ config â”œâ”€â”€ package.json â”œâ”€â”€ postcss.config.js â”œâ”€â”€ public â”œâ”€â”€ server â”œâ”€â”€ src â””â”€â”€ yarn.lock")]),e._v(" "),_("p",[e._v("ä»ä¸­ä¸éš¾å‘ç°node serverä¸­éœ€è¦é…ç½®çš„èµ„æºç›®å½•å¾€å¾€ä¼šå’Œwebpackçš„å·¥ç¨‹ç›®å½•é‡å ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦åœ¨expressä¸­è¿›è¡Œç›¸åº”çš„é…ç½®ï¼Œæ‰èƒ½å®ç°èµ„æºçš„æ­£ç¡®ç´¢å¼•ã€‚")]),e._v(" "),_("p",[e._v("1ã€htmlæ¨¡æ¿èµ„æºè¯»å–")]),e._v(" "),_("p",[e._v("htmlä½œä¸ºwebpackä¸­çš„templatesï¼Œåœ¨expressä¸­åˆ™ä¼šå˜æˆviewsï¼Œè¯»å–æ–¹å¼ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹èµ„æºè¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š")]),e._v(" "),_("blockquote",[_("p",[e._v("npm install ejs  #è®©expressæ”¯æŒhtmlæ¨¡æ¿æ ¼å¼")])]),e._v(" "),_("blockquote",[_("p",[e._v("const ejs = require('ejs')")]),e._v(" "),_("p",[e._v("const app = express()")]),e._v(" "),_("p",[e._v("// view engine, é»˜è®¤å¯ä»¥æŒ‡å‘dist")]),e._v(" "),_("p",[e._v("app.set('views', project.paths.dist())")]),e._v(" "),_("p",[e._v("app.engine('.html', ejs.__express)")]),e._v(" "),_("p",[e._v("app.set('view engine', 'html')")]),e._v(" "),_("p",[e._v("// é€šè¿‡é…ç½®è®©expressè¯»å–webpackçš„å†…å­˜æ‰“åŒ…èµ„æºä¸‹çš„templateæ–‡ä»¶")]),e._v(" "),_("p",[e._v("app.use('/home', function (req, res, next) {")]),e._v(" "),_("p",[e._v("const filename = path.join(compiler.outputPath, 'index.html'')")]),e._v(" "),_("p",[e._v("compiler.outputFileSystem.readFile(filename, (err, result) => {")]),e._v(" "),_("p",[e._v("â€‹    if (err) {")]),e._v(" "),_("p",[e._v("â€‹     return next(err)")]),e._v(" "),_("p",[e._v("â€‹    }")]),e._v(" "),_("p",[e._v("res.set('content-type', 'text/html')")]),e._v(" "),_("p",[e._v("â€‹     res.send(result)")]),e._v(" "),_("p",[e._v("â€‹     res.end()")]),e._v(" "),_("p",[e._v("})")]),e._v(" "),_("p",[e._v("})")]),e._v(" "),_("p",[e._v("//è®©expressæ‰€æœ‰çš„è·¯ç”±è¯·æ±‚éƒ½è½åˆ°index.htmlä¸­ï¼Œå†æœ‰å‰ç«¯æ¡†æ¶ä¸­çš„å‰ç«¯è·¯ç”±æ¥ç®¡é¡µé¢çš„è·³è½¬")]),e._v(" "),_("p",[e._v("app.use('*', function (req, res, next) {")]),e._v(" "),_("p",[e._v("â€‹    const filename = path.join(compiler.outputPath, 'index.html')")]),e._v(" "),_("p",[e._v("â€‹    compiler.outputFileSystem.readFile(filename, (err, result) => {")]),e._v(" "),_("p",[e._v("â€‹      if (err) {")]),e._v(" "),_("p",[e._v("â€‹        return next(err)")]),e._v(" "),_("p",[e._v("â€‹      }")]),e._v(" "),_("p",[e._v("â€‹      res.set('content-type', 'text/html')")]),e._v(" "),_("p",[e._v("â€‹      res.send(result)")]),e._v(" "),_("p",[e._v("â€‹      res.end()")]),e._v(" "),_("p",[e._v("â€‹    })")]),e._v(" "),_("p",[e._v("â€‹    /"),_("em",[e._v("ä¹Ÿå¯ä»¥æŒ‡å®šåˆ°ç‰¹å®šçš„viewsæ–‡ä»¶ä¸‹è¿›è¡Œæ¨¡æ¿èµ„æºè¯»å–")]),e._v("/")]),e._v(" "),_("p",[e._v("â€‹     res.render('home.html', {")]),e._v(" "),_("p",[e._v("â€‹       name:'home.html'")]),e._v(" "),_("p",[e._v("â€‹     })")]),e._v(" "),_("p",[e._v("})")])]),e._v(" "),_("p",[e._v("2ã€jså’Œcssèµ„æºè¯»å– jså’Œcssçš„å¼•ç”¨åœ°å€åœ¨webpackçš„å¼€å‘ç¯å¢ƒä¸­é€šå¸¸ä¼šæŒ‡å‘publicpathï¼Œæ‰€ä»¥åœ¨å¼€å‘é¡µé¢ä¸­ä¼šç›´æ¥å¦‚ä¸‹åµŒå…¥å¦‚ä¸‹åœ°å€ï¼Œç”±äºæ˜¯é‡‡ç”¨ç»å¯¹åœ°å€æŒ‡å‘ï¼Œæ‰€ä»¥æ— éœ€åšä»»ä½•é…ç½®ï¼š")]),e._v(" "),_("blockquote",[_("link",{attrs:{rel:"stylesheet",href:"http://127.0.0.1:3000/css/app.qxdfa323434adfc23314.css"}}),_("script",{attrs:{src:"http://127.0.0.1:3000/js/app.ab92c02d96a1a7cd4919.js"}})]),e._v(" "),_("p",[e._v("3ã€é™æ€èµ„æºè¯»å– å…¶ä»–ç±»ä¼¼fontï¼Œimagesç­‰é™æ€è¯»å–ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªå›¾ç‰‡æ”¾åˆ°å·¥ç¨‹ç»“æ„ä¸­çš„publicä¸‹ï¼Œåˆ™è®¿é—®åœ°å€å¯ä»¥æŒ‰å¦‚ä¸‹ä¹¦å†™ï¼Œæ”¯æŒçœŸå®è·¯å¾„å’Œè™šæ‹Ÿè·¯å¾„ï¼š")]),e._v(" "),_("blockquote",[_("p",[e._v("// çœŸå®è·¯å¾„ï¼Œæ ¹ç›®å½•è®¿é—®ï¼š/demo.png -> /pulbic/demo.png")]),e._v(" "),_("p",[e._v("app.use(express.static(project.paths.public()))")]),e._v(" "),_("p",[e._v("// çœŸå®è·¯å¾„ï¼Œå­ç›®å½•è®¿é—®ï¼š/static/demo.png -> /pulbic/static/demo.png")]),e._v(" "),_("p",[e._v("app.use(express.static(project.paths.public()))")]),e._v(" "),_("p",[e._v("// è™šæ‹Ÿè·¯å¾„ï¼Œè·Ÿç›®å½•è®¿é—®ï¼š/static/demo.png -> /pulbic/demo.png")]),e._v(" "),_("p",[e._v("app.use('/static/', express.static(project.paths.public()))")]),e._v(" "),_("p",[e._v("// è™šæ‹Ÿè·¯å¾„ï¼Œå­ç›®å½•è®¿é—®ï¼š/static/img/demo.png -> /pulbic/img/demo.png")]),e._v(" "),_("p",[e._v("app.use('/static/', express.static(project.paths.public()))")])]),e._v(" "),_("p",[e._v("é€šè¿‡ä»¥ä¸Šé…ç½®ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨è®¿é—®å¼€å‘åœ°å€( eg: localhost:3000 )æ—¶å³å¯å¾—åˆ°æ‰€éœ€çš„å…¨éƒ¨å‰ç«¯èµ„æºã€‚")]),e._v(" "),_("p",[_("strong",[e._v("å››ã€mockæ•°æ®æ¨¡æ‹Ÿ")])]),e._v(" "),_("p",[e._v("ä½œä¸ºå‰ç«¯ç»å¸¸éœ€è¦æ¨¡æ‹Ÿåå°æ•°æ®ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºmockã€‚é€šå¸¸çš„æ–¹å¼ä¸ºè‡ªå·±æ­å»ºä¸€ä¸ªæœåŠ¡å™¨ï¼Œè¿”å›æˆ‘ä»¬æƒ³è¦çš„æ•°æ®ï¼Œæ—¢ç„¶æˆ‘ä»¬å·²ç»å°†expressé›†æˆåˆ°äº†æˆ‘ä»¬çš„å¼€å‘ç¯å¢ƒä¸‹ï¼Œé‚£ä¹ˆå®ç°ä¸€ä¸ªmockå°±ä¼šéå¸¸ç®€å•ï¼Œä»¥ä¸‹ä»‹ç»ä¸¤ç§mockæ•°æ®çš„æ–¹å¼ã€‚")]),e._v(" "),_("p",[e._v("1ã€é…ç½®ä¸“å±çš„mockè·¯ç”±æ¨¡å— æˆ‘ä»¬å¯ä»¥åœ¨æˆ‘ä»¬çš„serveré¡¹ç›®ä¸‹çš„routesæ¨¡å—ä¸­åŠ å…¥ä¸€ä¸ªmockæ¨¡å—ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š > server â”œâ”€â”€ main.js â”œâ”€â”€ mock â”‚ â”œâ”€â”€ opporList.json â”œâ”€â”€ routes â”‚ â”œâ”€â”€ index.js â”‚ â””â”€â”€ mock.js â””â”€â”€ views â””â”€â”€ home.html")]),e._v(" "),_("p",[e._v("ç„¶åå†åœ¨æˆ‘ä»¬çš„serverä¸‹çš„é…ç½®æ–‡ä»¶ä¸­å¯¼å…¥mockæ¨¡å—é…ç½®ï¼š")]),e._v(" "),_("blockquote",[_("p",[e._v("// main.js")]),e._v(" "),_("p",[e._v("const mock = require('./routes/mock')")]),e._v(" "),_("p",[e._v("if (project.env === 'development') {")]),e._v(" "),_("p",[e._v("// mock routes")]),e._v(" "),_("p",[e._v("app.use('/mock, mock)")]),e._v(" "),_("p",[e._v("}")])]),e._v(" "),_("p",[e._v("routesä¸­çš„mock.jsä¸­å†™å…¥å¦‚ä¸‹mockæ•°æ®é…ç½®å³å¯ï¼š")]),e._v(" "),_("blockquote",[_("p",[e._v("const express = require('express')")]),e._v(" "),_("p",[e._v("const router = express.Router()")]),e._v(" "),_("p",[e._v("const opporList = require('../mock/opporList.json');")]),e._v(" "),_("p",[e._v("const Mock = require('mockjs');")]),e._v(" "),_("p",[e._v("// ç›´æ¥è¯»å–jsonæ–‡ä»¶å¯¼å‡º")]),e._v(" "),_("p",[e._v("router.get('/backend/opporList', function (req, res) {")]),e._v(" "),_("p",[e._v("res.json(opporList)")]),e._v(" "),_("p",[e._v("})")]),e._v(" "),_("p",[e._v("// åŸºäºmockjsç”Ÿæˆæ•°æ®, ä¼˜åŠ¿åœ¨äºå¯¹é¡¹ç›®ä»£ç æ— ä¾µå…¥ï¼Œå¹¶ä¸”æ”¯æŒfetchï¼Œxhrç­‰å¤šç§æ–¹å¼çš„æ‹¦æˆª")]),e._v(" "),_("p",[e._v("router.get('/backend/employee', function (req, res) {")]),e._v(" "),_("p",[e._v("var data = Mock.mock({")]),e._v(" "),_("p",[e._v("â€‹    // å±æ€§ list çš„å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­å«æœ‰ 1 åˆ° 10 ä¸ªå…ƒç´ ")]),e._v(" "),_("p",[e._v("â€‹    'list|1-10': [{")]),e._v(" "),_("p",[e._v("â€‹      // å±æ€§ id æ˜¯ä¸€ä¸ªè‡ªå¢æ•°ï¼Œèµ·å§‹å€¼ä¸º 1ï¼Œæ¯æ¬¡å¢ 1")]),e._v(" "),_("p",[e._v("â€‹      'id|+1': 1")]),e._v(" "),_("p",[e._v("â€‹    }]")]),e._v(" "),_("p",[e._v("})")]),e._v(" "),_("p",[e._v("res.json(data)")]),e._v(" "),_("p",[e._v("})")]),e._v(" "),_("p",[e._v("module.exports = router")])]),e._v(" "),_("p",[e._v("é…ç½®å®Œæˆåï¼Œè®¿é—®å¦‚ä¸‹åœ°å€å³å¯æ‹¿åˆ°mockæ•°æ®ï¼š")]),e._v(" "),_("ul",[_("li",[e._v("http://127.0.0.1:3000/mock/backend/opporList")]),e._v(" "),_("li",[e._v("http://127.0.0.1:3000/mock/backend/employee")])]),e._v(" "),_("p",[e._v("å†åˆ©ç”¨æˆ‘ä»¬çš„proxy.configä¿®æ”¹node-proxyé…ç½®ï¼Œå°†æµ‹è¯•è‡ªåŠ¨è½¬åˆ°mockç›®æ ‡åœ°å€ä¸‹ï¼š")]),e._v(" "),_("blockquote",[_("p",[e._v("const proxy = [")]),e._v(" "),_("p",[e._v("â€‹    {")]),e._v(" "),_("p",[e._v("â€‹      url: '/backend/*',")]),e._v(" "),_("p",[e._v('â€‹      target: "http://127.0.0.1:3000/mock"')]),e._v(" "),_("p",[e._v("â€‹    }")]),e._v(" "),_("p",[e._v("]")]),e._v(" "),_("p",[e._v("module.exports = proxy")])]),e._v(" "),_("p",[e._v("2ã€æ­å»ºç‹¬ç«‹çš„mockæœåŠ¡ å¦‚æœä¼ä¸šä¸­æœ‰éƒ¨ç½²ç‹¬ç«‹çš„mockæœåŠ¡å™¨ï¼Œå¦‚puer+mockï¼šæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä¿®æ”¹ç®€å•çš„proxy.configæ¥ç›´æ¥å®ç°éœ€è¦mockçš„è¯·æ±‚åœ°å€è½¬å‘ï¼Œç›¸å¯¹ä¿®æ”¹å°±æ¯”è¾ƒç®€å•ï¼Œå¦‚ä¸‹ï¼š")]),e._v(" "),_("blockquote",[_("p",[e._v("const proxy = [")]),e._v(" "),_("p",[e._v("â€‹    {")]),e._v(" "),_("p",[e._v("â€‹      url: '/backend/*',")]),e._v(" "),_("p",[e._v('â€‹      target: "http://10.4.31.11:8080/mock"')]),e._v(" "),_("p",[e._v("â€‹    }")]),e._v(" "),_("p",[e._v("]")]),e._v(" "),_("p",[e._v("module.exports = proxy")])]),e._v(" "),_("p",[_("strong",[e._v("äº”ã€é¢„è§ˆæ‰“åŒ…åçš„èµ„æºæ•ˆæœ")])]),e._v(" "),_("p",[e._v("å½“æˆ‘ä»¬å¼€å‘å®Œæˆåï¼Œwepbacké€šè¿‡ç¼–è¯‘å¯ä»¥å¾—åˆ°æˆ‘ä»¬éœ€è¦çš„å„ç§é™æ€èµ„æºï¼Œè¿™ç±»æ–‡ä»¶é€šå¸¸æ˜¯ä½œä¸ºé™æ€èµ„æºå­˜åœ¨ï¼Œéœ€è¦æ”¾åˆ°cdnæˆ–è€…éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šæ‰èƒ½è®¿é—®ï¼Œä½†æ˜¯æˆ‘ä»¬é€šè¿‡ç®€å•çš„é…ç½®ä¹Ÿå¯ä»¥ç›´æ¥åœ¨æœ¬åœ°ç¯å¢ƒä¸‹ç›´æ¥é¢„è§ˆæ‰“åŒ…åçš„èµ„æºæ•ˆæœï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹ï¼š")]),e._v(" "),_("p",[e._v("\\1. æ‰¾åˆ°æ„å»ºèµ„æºç”Ÿæˆç›®å½•, ç¡®è®¤æ„å»ºèµ„æºå·²å­˜åœ¨ï¼š")]),e._v(" "),_("p",[e._v("dist â”œâ”€â”€ css â”‚ â”œâ”€â”€ app.5f5af15a.css â”‚ â”œâ”€â”€ login.7cb6ada6.css â”‚ â””â”€â”€ vendors.54895ec1.css â”œâ”€â”€ images â”‚ â”œâ”€â”€ login_bg.8953d181.png â”‚ â”œâ”€â”€ logo.01cf3dce.png â”‚ â””â”€â”€ wap_ico.e4e9be83.png â”œâ”€â”€ index.html â”œâ”€â”€ js â”‚ â”œâ”€â”€ app.eb852be2.js â”‚ â”œâ”€â”€ login.9a049514.js â”‚ â”œâ”€â”€ manifest.c75a01fc.js â”‚ â””â”€â”€ vendors.20a872dc.js â””â”€â”€ login.html")]),e._v(" "),_("p",[e._v("\\2. ä¿®æ”¹expressçš„æ–‡æœ¬é…ç½®ä¿¡æ¯ï¼ŒåŠ å…¥æ„å»ºå®Œæˆåçš„é™æ€èµ„æºåœ°å€é…ç½®ï¼š")]),e._v(" "),_("blockquote",[_("p",[e._v("app.set('views', project.paths.dist())")]),e._v(" "),_("p",[e._v("if (project.env === 'development') {")]),e._v(" "),_("p",[e._v("....")]),e._v(" "),_("p",[e._v("} else {")]),e._v(" "),_("p",[e._v("debug(")]),e._v(" "),_("p",[e._v("â€‹    'Server is being run outside of live development mode'")]),e._v(" "),_("p",[e._v(")")]),e._v(" "),_("p",[e._v("// é…ç½®é¢„è§ˆç¯å¢ƒä¸‹çš„proxy.configï¼Œä¸€èˆ¬å¯ä»¥æŒ‡å‘æµ‹è¯•ç¯å¢ƒåœ°å€")]),e._v(" "),_("p",[e._v("const proxyConfig = require('./proxy.test.config')")]),e._v(" "),_("p",[e._v("const routes = require('./routes')")]),e._v(" "),_("p",[e._v("proxyConfig.forEach(function (item) {")]),e._v(" "),_("p",[e._v("â€‹    app.use(item.url, proxy(createProxySetting(item.target)))")]),e._v(" "),_("p",[e._v("})")]),e._v(" "),_("p",[e._v("// ä¿®æ”¹é™æ€èµ„æºæŒ‡å‘åœ°å€ï¼Œå¯ä»¥ç›´æ¥é…ç½®åˆ°distç›®å½•ä¸‹")]),e._v(" "),_("p",[e._v("app.use(project.compiler_public_path,express.static(project.paths.dist())")]),e._v(" "),_("p",[e._v("// é…ç½®è®¿é—®è·¯ç”±urlï¼Œå¹¶åœ¨è®¾ç½®ç½®çœŸå®çš„templateæ–‡ä»¶åœ°å€ï¼Œä¸webpackä¸­çš„htmlpluginä¸‹çš„filenameé…ç½®è·¯å¾„ä¿æŒä¸€è‡´ï¼Œä¸€èˆ¬éƒ½åœ¨distç›®å½•ä¸‹")]),e._v(" "),_("p",[e._v("app.use(project.compiler_base_route, routes)")]),e._v(" "),_("p",[e._v("}")])]),e._v(" "),_("p",[e._v("\\3. å¯åŠ¨é¢„è§ˆé¡µé¢ï¼Œè®¿é—®:localhost:3000å³å¯")]),e._v(" "),_("p",[e._v("NODE_ENV=production node ./bin/dev-server.js")]),e._v(" "),_("p",[e._v("å®Œæ•´å·¥ç¨‹ç»“æ„ç›®å½•ç»“æ„å‚è€ƒ")]),e._v(" "),_("blockquote",[_("p",[e._v("Project â”œâ”€â”€ LICENSE â”œâ”€â”€ README.md â”œâ”€â”€ app.json â”œâ”€â”€ bin â”‚ â”œâ”€â”€ compile.js â”‚ â””â”€â”€ dev-server.js â”œâ”€â”€ config â”‚ â”œâ”€â”€ environments.config.js â”‚ â”œâ”€â”€ karma.config.js â”‚ â”œâ”€â”€ npm-debug.log â”‚ â”œâ”€â”€ project.config.js â”‚ â””â”€â”€ webpack.config.js â”œâ”€â”€ package.json â”œâ”€â”€ postcss.config.js â”œâ”€â”€ public â”‚ â”œâ”€â”€ favicon.ico â”‚ â”œâ”€â”€ humans.txt â”‚ â””â”€â”€ robots.txt â”œâ”€â”€ server â”‚ â”œâ”€â”€ main.js â”‚ â”œâ”€â”€ proxy.config.js â”‚ â”œâ”€â”€ routes â”‚ â””â”€â”€ views â”œâ”€â”€ src â”‚ â”œâ”€â”€ api â”‚ â”œâ”€â”€ components â”‚ â”œâ”€â”€ containers â”‚ â”œâ”€â”€ index.html â”‚ â”œâ”€â”€ layouts â”‚ â”œâ”€â”€ main.js â”‚ â”œâ”€â”€ routes â”‚ â”œâ”€â”€ static â”‚ â”œâ”€â”€ store â”‚ â””â”€â”€ until â”œâ”€â”€ tests â”‚ â”œâ”€â”€ components â”‚ â”œâ”€â”€ layouts â”‚ â”œâ”€â”€ routes â”‚ â”œâ”€â”€ store â”‚ â””â”€â”€ test-bundler.js â””â”€â”€ yarn.lock")])]),e._v(" "),_("p",[e._v("å·¥ç¨‹æ¼”ç¤ºdemoï¼ˆhttps://github.com/taikongfeizhu/webpack-develop-startkitï¼‰")]),e._v(" "),_("p",[_("strong",[e._v("å°ç»“")])]),e._v(" "),_("p",[e._v("å°†webpackçš„å„ç±»é«˜çº§ç‰¹æ€§å’ŒnodeåŸºç¡€æœåŠ¡æœ‰æ•ˆç›¸ç»“åˆï¼ŒæŒ‰éœ€æ‰“é€ ä¸“å±è‡ªèº«é¡¹ç›®çš„å¼€å‘å¹³å°ï¼Œä¸ä»…èƒ½å°†é¡¹ç›®ä½“ç³»ä»ç®€å•çš„é¡µé¢å¼€å‘è½¬å‘å·¥ç¨‹åŒ–æ ‡å‡†è¿ˆè¿›ï¼Œæ›´èƒ½æå¤§çš„æ”¹å–„å‰ç«¯å¼€å‘çš„ä½“éªŒï¼Œæå‡å¼€å‘æ•ˆç‡ï¼Œæœ‰çº°æ¼çš„åœ°æ–¹ä¹Ÿå¸Œæœ›èƒ½å¤šå¤šæŒ‡æ­£ã€‚")])])}],!1,null,null,null);t.options.__file="åŸºäº webpack çš„å‰åç«¯åˆ†ç¦»å¼€å‘ç¯å¢ƒå®è·µ.md";v.default=t.exports}}]);