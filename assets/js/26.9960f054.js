(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{95:function(v,_,e){"use strict";e.r(_);var t=e(0),p=Object(t.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var v=this,_=v.$createElement,e=v._self._c||_;return e("div",{staticClass:"content"},[e("h2",{attrs:{id:"分享前端开发常用代码片段"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#分享前端开发常用代码片段","aria-hidden":"true"}},[v._v("#")]),v._v(" 分享前端开发常用代码片段")]),v._v(" "),e("p",[v._v("[前端大全](javascript:void(0)😉 "),e("em",[v._v("5月7日")])]),v._v(" "),e("p",[v._v("（点击上方公众号，可快速关注）")]),v._v(" "),e("blockquote",[e("p",[v._v("作者：WEBING")]),v._v(" "),e("p",[v._v("segmentfault.com/a/1190000014700549")])]),v._v(" "),e("p",[e("strong",[v._v("一、预加载图像")])]),v._v(" "),e("p",[v._v("如果你的网页中需要使用大量初始不可见的（例如，悬停的）图像，那么可以预加载这些图像。")]),v._v(" "),e("p",[e("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1IdLHtiaFiaHlfT6GVqJ3tMWCmv83TxjWKOS2JVr1EHCqeibOp1MLqISBgHvtloHOtIrQa9iceY1X4TA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"img"}})]),v._v(" "),e("p",[e("strong",[v._v("二、检查图像是否加载")])]),v._v(" "),e("p",[v._v("有时为了继续脚本，你可能需要检查图像是否全部加载完毕。")]),v._v(" "),e("p",[e("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1IdLHtiaFiaHlfT6GVqJ3tMW5OlSdibwApp1xfD1PCPLoLfPzA9ianvWj1HcH6uVbysVM7Yxvg4HEUPg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"img"}})]),v._v(" "),e("p",[v._v("你也可以使用 ID 或 CLASS 替换"),e("img"),v._v(" 标签来检查某个特定的图像是否被加载。")]),v._v(" "),e("p",[e("strong",[v._v("三、自动修复破坏的图像")])]),v._v(" "),e("p",[v._v("逐个替换已经破坏的图像链接是非常痛苦的。不过，下面这段简单的代码可以帮助你。")]),v._v(" "),e("p",[e("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1IdLHtiaFiaHlfT6GVqJ3tMWJZaaiaia1bGmIEqJy4iaZW5DhsqP5eQYbYQLWa5IfeHle5eKMlCiaia203A/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"img"}})]),v._v(" "),e("p",[e("strong",[v._v("四、悬停切换")])]),v._v(" "),e("p",[v._v("当用户鼠标悬停在可点击的元素上时，可添加类到元素中，反之则移除类。")]),v._v(" "),e("p",[e("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1IdLHtiaFiaHlfT6GVqJ3tMWFzcF3wlrL80eujF6EU1AZXs4gicuEeKZOvUWuLjuFuibymAwOEboX7eA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"img"}})]),v._v(" "),e("p",[v._v("只需要添加必要的 CSS 即可。更简单的方法是使用 toggleClass() 方法。")]),v._v(" "),e("p",[e("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1IdLHtiaFiaHlfT6GVqJ3tMWHpoUJ50xAxLT4FjG203iazdNVPEsiaogyYibNibIqicuj9HmhrBTsjY2hwg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"img"}})]),v._v(" "),e("p",[e("strong",[v._v("五、淡入淡出/显示隐藏")])]),v._v(" "),e("hr"),v._v(" "),e("p",[e("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1IdLHtiaFiaHlfT6GVqJ3tMWKJbyJ6XzqWpcf1ZPI74zicOKribz41XYGCpqSOfRmAyn3IRUFxDCz0Zw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"img"}})]),v._v(" "),e("p",[e("strong",[v._v("六、鼠标滚轮")])]),v._v(" "),e("blockquote",[e("p",[v._v("$('#content').on(\"mousewheel DOMMouseScroll\", function (event) {")]),v._v(" "),e("p",[v._v("​    // chrome & ie || // firefox")]),v._v(" "),e("p",[v._v("​    var delta = (event.originalEvent.wheelDelta && (event.originalEvent.wheelDelta > 0 ? 1 : -1)) ||")]),v._v(" "),e("p",[v._v("​        (event.originalEvent.detail && (event.originalEvent.detail > 0 ? -1 : 1));")]),v._v(" "),e("p",[v._v("​")]),v._v(" "),e("p",[v._v("​    if (delta > 0) {")]),v._v(" "),e("p",[v._v("​        console.log('mousewheel top');")]),v._v(" "),e("p",[v._v("​    } else if (delta < 0) {")]),v._v(" "),e("p",[v._v("​        console.log('mousewheel bottom');")]),v._v(" "),e("p",[v._v("​    }")]),v._v(" "),e("p",[v._v("});")])]),v._v(" "),e("p",[e("strong",[v._v("七、鼠标坐标")])]),v._v(" "),e("hr"),v._v(" "),e("p",[v._v("1、JavaScript实现")]),v._v(" "),e("blockquote",[e("p",[v._v("X:"),e("input",{attrs:{id:"xxx",type:"text"}}),v._v(" Y:"),e("input",{attrs:{id:"yyy",type:"text"}})])]),v._v(" "),e("blockquote",[e("p",[v._v("function mousePosition(ev){")]),v._v(" "),e("p",[v._v("​    if(ev.pageX || ev.pageY){")]),v._v(" "),e("p",[v._v("​        return {x:ev.pageX, y:ev.pageY};")]),v._v(" "),e("p",[v._v("​    }")]),v._v(" "),e("p",[v._v("​    return {")]),v._v(" "),e("p",[v._v("​        x:ev.clientX + document.body.scrollLeft - document.body.clientLeft,")]),v._v(" "),e("p",[v._v("​        y:ev.clientY + document.body.scrollTop - document.body.clientTop")]),v._v(" "),e("p",[v._v("​    };")]),v._v(" "),e("p",[v._v("}")]),v._v(" "),e("p",[v._v("function mouseMove(ev){")]),v._v(" "),e("p",[v._v("​    ev = ev || window.event;")]),v._v(" "),e("p",[v._v("​")]),v._v(" "),e("p",[v._v("​    var mousePos = mousePosition(ev);")]),v._v(" "),e("p",[v._v("​")]),v._v(" "),e("p",[v._v("​    document.getElementById('xxx').value = mousePos.x;")]),v._v(" "),e("p",[v._v("​    document.getElementById('yyy').value = mousePos.y;")]),v._v(" "),e("p",[v._v("}")]),v._v(" "),e("p",[v._v("document.onmousemove = mouseMove;")])]),v._v(" "),e("p",[v._v("2、jQuery实现")]),v._v(" "),e("blockquote",[e("p",[v._v("$('#ele').click(function(event){")]),v._v(" "),e("p",[v._v("​    //获取鼠标在图片上的坐标")]),v._v(" "),e("p",[v._v("​    console.log('X：' + event.offsetX+'\\n Y:' + event.offsetY);")]),v._v(" "),e("p",[v._v("​")]),v._v(" "),e("p",[v._v("​    //获取元素相对于页面的坐标")]),v._v(" "),e("p",[v._v("​    console.log('X：'+$(this).offset().left+'\\n Y:'+$(this).offset().top);")]),v._v(" "),e("p",[v._v("});")])]),v._v(" "),e("p",[e("strong",[v._v("八、禁止移动端浏览器页面滚动")])]),v._v(" "),e("hr"),v._v(" "),e("p",[v._v("1、HTML实现")]),v._v(" "),e("blockquote",[e("body",{attrs:{ontouchmove:"event.preventDefault()"}})]),v._v(" "),e("p",[v._v("2、JavaScript实现")]),v._v(" "),e("blockquote",[e("p",[v._v("document.addEventListener('touchmove', function(event) {")]),v._v(" "),e("p",[v._v("​    event.preventDefault();")]),v._v(" "),e("p",[v._v("});")])]),v._v(" "),e("p",[e("strong",[v._v("九、阻止默认行为")])]),v._v(" "),e("blockquote",[e("p",[v._v("// JavaScript")]),v._v(" "),e("p",[v._v("document.getElementById('btn').addEventListener('click', function (event) {")]),v._v(" "),e("p",[v._v("​    event = event || window.event；")]),v._v(" "),e("p",[v._v("​    if (event.preventDefault){")]),v._v(" "),e("p",[v._v("​        // W3C")]),v._v(" "),e("p",[v._v("​        event.preventDefault();")]),v._v(" "),e("p",[v._v("​    } else{")]),v._v(" "),e("p",[v._v("​        // IE")]),v._v(" "),e("p",[v._v("​        event.returnValue = false;")]),v._v(" "),e("p",[v._v("​    }")]),v._v(" "),e("p",[v._v("}, false);")]),v._v(" "),e("p",[v._v("// jQuery")]),v._v(" "),e("p",[v._v("$('#btn').on('click', function (event) {")]),v._v(" "),e("p",[v._v("​    event.preventDefault();")]),v._v(" "),e("p",[v._v("});")])]),v._v(" "),e("p",[e("strong",[v._v("十、阻止冒泡")])]),v._v(" "),e("blockquote",[e("p",[v._v("// JavaScript")]),v._v(" "),e("p",[v._v("document.getElementById('btn').addEventListener('click', function (event) {")]),v._v(" "),e("p",[v._v("​    event = event || window.event；")]),v._v(" "),e("p",[v._v("​    if (event.stopPropagation){")]),v._v(" "),e("p",[v._v("​        // W3C")]),v._v(" "),e("p",[v._v("​        event.stopPropagation();")]),v._v(" "),e("p",[v._v("​    } else{")]),v._v(" "),e("p",[v._v("​        // IE")]),v._v(" "),e("p",[v._v("​        event.cancelBubble = true;")]),v._v(" "),e("p",[v._v("​    }")]),v._v(" "),e("p",[v._v("}, false);")]),v._v(" "),e("p",[v._v("// jQuery")]),v._v(" "),e("p",[v._v("$('#btn').on('click', function (event) {")]),v._v(" "),e("p",[v._v("​    event.stopPropagation();")]),v._v(" "),e("p",[v._v("});")])]),v._v(" "),e("p",[e("strong",[v._v("十一、检测浏览器是否支持svg")])]),v._v(" "),e("blockquote",[e("p",[v._v("function isSupportSVG() {")]),v._v(" "),e("p",[v._v("​    var SVG_NS = 'http://www.w3.org/2000/svg';")]),v._v(" "),e("p",[v._v("​    return !!document.createElementNS &&!!document.createElementNS(SVG_NS, 'svg').createSVGRect;")]),v._v(" "),e("p",[v._v("}")]),v._v(" "),e("p",[v._v("console.log(isSupportSVG());")])]),v._v(" "),e("p",[e("strong",[v._v("十二、检测浏览器是否支持canvas")])]),v._v(" "),e("blockquote",[e("p",[v._v("function isSupportCanvas() {")]),v._v(" "),e("p",[v._v("​    if(document.createElement('canvas').getContext){")]),v._v(" "),e("p",[v._v("​        return true;")]),v._v(" "),e("p",[v._v("​    }else{")]),v._v(" "),e("p",[v._v("​        return false;")]),v._v(" "),e("p",[v._v("​    }")]),v._v(" "),e("p",[v._v("}")]),v._v(" "),e("p",[v._v("console.log(isSupportCanvas());")])]),v._v(" "),e("p",[e("strong",[v._v("十三、检测是否是微信浏览器")])]),v._v(" "),e("blockquote",[e("p",[v._v("function isWeiXinClient() {")]),v._v(" "),e("p",[v._v("​    var ua = navigator.userAgent.toLowerCase();")]),v._v(" "),e("p",[v._v('​    if (ua.match(/MicroMessenger/i)=="micromessenger") {')]),v._v(" "),e("p",[v._v("​        return true;")]),v._v(" "),e("p",[v._v("​    } else {")]),v._v(" "),e("p",[v._v("​        return false;")]),v._v(" "),e("p",[v._v("​    }")]),v._v(" "),e("p",[v._v("}")]),v._v(" "),e("p",[v._v("alert(isWeiXinClient());")])]),v._v(" "),e("p",[e("strong",[v._v("十四、检测是否移动端及浏览器内核")])]),v._v(" "),e("blockquote",[e("p",[v._v("var browser = {")]),v._v(" "),e("p",[v._v("​    versions: function() {")]),v._v(" "),e("p",[v._v("​        var u = navigator.userAgent;")]),v._v(" "),e("p",[v._v("​        return {")]),v._v(" "),e("p",[v._v("​            trident: u.indexOf('Trident') > -1, //IE内核")]),v._v(" "),e("p",[v._v("​            presto: u.indexOf('Presto') > -1, //opera内核")]),v._v(" "),e("p",[v._v("​            webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核")]),v._v(" "),e("p",[v._v("​            gecko: u.indexOf('Firefox') > -1, //火狐内核Gecko")]),v._v(" "),e("p",[v._v("​            mobile: !!u.match(/AppleWebKit."),e("em",[v._v("Mobile.")]),v._v("/), //是否移动终端")]),v._v(" "),e("p",[v._v("​            ios: !!u.match(/(i[^;]+;( U;)? CPU.+Mac OS X/), //ios")]),v._v(" "),e("p",[v._v("​            android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android")]),v._v(" "),e("p",[v._v("​            iPhone: u.indexOf('iPhone') > -1 , //iPhone")]),v._v(" "),e("p",[v._v("​            iPad: u.indexOf('iPad') > -1, //iPad")]),v._v(" "),e("p",[v._v("​            webApp: u.indexOf('Safari') > -1 //Safari")]),v._v(" "),e("p",[v._v("​        };")]),v._v(" "),e("p",[v._v("​    }")]),v._v(" "),e("p",[v._v("}")]),v._v(" "),e("p",[v._v("if (browser.versions.mobile() || browser.versions.ios() || browser.versions.android() ||browser.versions.iPhone() || browser.versions.iPad()) {")]),v._v(" "),e("p",[v._v("​    alert('移动端');")]),v._v(" "),e("p",[v._v("}")])]),v._v(" "),e("p",[e("strong",[v._v("十五、检测是否电脑端/移动端")])]),v._v(" "),e("blockquote",[e("p",[v._v("var browser={")]),v._v(" "),e("p",[v._v("​    versions:function(){")]),v._v(" "),e("p",[v._v("​        var u = navigator.userAgent, app = navigator.appVersion;")]),v._v(" "),e("p",[v._v("​        var sUserAgent = navigator.userAgent;")]),v._v(" "),e("p",[v._v("​        return {")]),v._v(" "),e("p",[v._v("​        trident: u.indexOf('Trident') > -1,")]),v._v(" "),e("p",[v._v("​        presto: u.indexOf('Presto') > -1,")]),v._v(" "),e("p",[v._v('​        isChrome: u.indexOf("chrome") > -1,')]),v._v(" "),e("p",[v._v('​        isSafari: !u.indexOf("chrome") > -1 && (/webkit|khtml/).test(u),')]),v._v(" "),e("p",[v._v("​        isSafari3: !u.indexOf(\"chrome\") > -1 && (/webkit|khtml/).test(u) && u.indexOf('webkit/5') != -1,")]),v._v(" "),e("p",[v._v("​        webKit: u.indexOf('AppleWebKit') > -1,")]),v._v(" "),e("p",[v._v("​        gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1,")]),v._v(" "),e("p",[v._v("​        mobile: !!u.match(/AppleWebKit."),e("em",[v._v("Mobile.")]),v._v("/),")]),v._v(" "),e("p",[v._v("​        ios: !!u.match(/(i[^;]+;( U;)? CPU.+Mac OS X/),")]),v._v(" "),e("p",[v._v("​        android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1,")]),v._v(" "),e("p",[v._v("​        iPhone: u.indexOf('iPhone') > -1,")]),v._v(" "),e("p",[v._v("​        iPad: u.indexOf('iPad') > -1,")]),v._v(" "),e("p",[v._v("​        iWinPhone: u.indexOf('Windows Phone') > -1")]),v._v(" "),e("p",[v._v("​        };")]),v._v(" "),e("p",[v._v("​    }()")]),v._v(" "),e("p",[v._v("}")]),v._v(" "),e("p",[v._v("if(browser.versions.mobile || browser.versions.iWinPhone){")]),v._v(" "),e("p",[v._v('​    window.location = "http:/www.baidu.com/m/";')]),v._v(" "),e("p",[v._v("}")])]),v._v(" "),e("p",[e("strong",[v._v("十六、检测浏览器内核")])]),v._v(" "),e("blockquote",[e("p",[v._v("function getInternet(){")]),v._v(" "),e("p",[v._v('​    if(navigator.userAgent.indexOf("MSIE")>0) {')]),v._v(" "),e("p",[v._v('​      return "MSIE";       //IE浏览器')]),v._v(" "),e("p",[v._v("​    }")]),v._v(" "),e("p",[v._v('​    if(isFirefox=navigator.userAgent.indexOf("Firefox")>0){')]),v._v(" "),e("p",[v._v('​      return "Firefox";     //Firefox浏览器')]),v._v(" "),e("p",[v._v("​    }")]),v._v(" "),e("p",[v._v('​    if(isSafari=navigator.userAgent.indexOf("Safari")>0) {')]),v._v(" "),e("p",[v._v('​      return "Safari";      //Safan浏览器')]),v._v(" "),e("p",[v._v("​    }")]),v._v(" "),e("p",[v._v('​    if(isCamino=navigator.userAgent.indexOf("Camino")>0){')]),v._v(" "),e("p",[v._v('​      return "Camino";   //Camino浏览器')]),v._v(" "),e("p",[v._v("​    }")]),v._v(" "),e("p",[v._v('​    if(isMozilla=navigator.userAgent.indexOf("Gecko/")>0){')]),v._v(" "),e("p",[v._v('​      return "Gecko";    //Gecko浏览器')]),v._v(" "),e("p",[v._v("​    }")]),v._v(" "),e("p",[v._v("}")])]),v._v(" "),e("p",[e("strong",[v._v("十七、强制移动端页面横屏显示")])]),v._v(" "),e("blockquote",[e("p",[v._v('$( window ).on( "orientationchange", function( event ) {')]),v._v(" "),e("p",[v._v("​    if (event.orientation=='portrait') {")]),v._v(" "),e("p",[v._v("​        $('body').css('transform', 'rotate(90deg)');")]),v._v(" "),e("p",[v._v("​    } else {")]),v._v(" "),e("p",[v._v("​        $('body').css('transform', 'rotate(0deg)');")]),v._v(" "),e("p",[v._v("​    }")]),v._v(" "),e("p",[v._v("});")]),v._v(" "),e("p",[v._v("$( window ).orientationchange();")])]),v._v(" "),e("p",[e("strong",[v._v("十八、电脑端页面全屏显示")])]),v._v(" "),e("blockquote",[e("p",[v._v("function fullscreen(element) {")]),v._v(" "),e("p",[v._v("​    if (element.requestFullscreen) {")]),v._v(" "),e("p",[v._v("​        element.requestFullscreen();")]),v._v(" "),e("p",[v._v("​    } else if (element.mozRequestFullScreen) {")]),v._v(" "),e("p",[v._v("​        element.mozRequestFullScreen();")]),v._v(" "),e("p",[v._v("​    } else if (element.webkitRequestFullscreen) {")]),v._v(" "),e("p",[v._v("​        element.webkitRequestFullscreen();")]),v._v(" "),e("p",[v._v("​    } else if (element.msRequestFullscreen) {")]),v._v(" "),e("p",[v._v("​        element.msRequestFullscreen();")]),v._v(" "),e("p",[v._v("​    }")]),v._v(" "),e("p",[v._v("}")]),v._v(" "),e("p",[v._v("fullscreen(document.documentElement);")])]),v._v(" "),e("p",[e("strong",[v._v("十九、获得/失去焦点")])]),v._v(" "),e("hr"),v._v(" "),e("p",[v._v("1、JavaScript实现")]),v._v(" "),e("blockquote",[e("input",{attrs:{id:"i_input",type:"text",value:"会员卡号/手机号"}})]),v._v(" "),e("blockquote",[e("p",[v._v("// JavaScript")]),v._v(" "),e("p",[v._v("window.onload = function(){")]),v._v(" "),e("p",[v._v('​    var oIpt = document.getElementById("i_input");')]),v._v(" "),e("p",[v._v('​    if(oIpt.value == "会员卡号/手机号"){')]),v._v(" "),e("p",[v._v('​        oIpt.style.color = "#888";')]),v._v(" "),e("p",[v._v("​    }else{")]),v._v(" "),e("p",[v._v('​        oIpt.style.color = "#000";')]),v._v(" "),e("p",[v._v("​    };")]),v._v(" "),e("p",[v._v("​    oIpt.onfocus = function(){")]),v._v(" "),e("p",[v._v('​        if(this.value == "会员卡号/手机号"){')]),v._v(" "),e("p",[v._v('​            this.value="";')]),v._v(" "),e("p",[v._v('​            this.style.color = "#000";')]),v._v(" "),e("p",[v._v('​            this.type = "password";')]),v._v(" "),e("p",[v._v("​        }else{")]),v._v(" "),e("p",[v._v('​            this.style.color = "#000";')]),v._v(" "),e("p",[v._v("​        }")]),v._v(" "),e("p",[v._v("​    };")]),v._v(" "),e("p",[v._v("​")]),v._v(" "),e("p",[v._v("​    oIpt.onblur = function(){")]),v._v(" "),e("p",[v._v('​        if(this.value == ""){')]),v._v(" "),e("p",[v._v('​            this.value="会员卡号/手机号";')]),v._v(" "),e("p",[v._v('​            this.style.color = "#888";')]),v._v(" "),e("p",[v._v('​            this.type = "text";')]),v._v(" "),e("p",[v._v("​        }")]),v._v(" "),e("p",[v._v("​    };")]),v._v(" "),e("p",[v._v("}")])]),v._v(" "),e("p",[v._v("2、jQuery实现")]),v._v(" "),e("blockquote",[e("input",{staticClass:"oldpsw",attrs:{type:"text",id:"showPwd",value:"请输入您的注册密码"}}),v._v(" "),e("input",{staticClass:"oldpsw",staticStyle:{display:"none"},attrs:{type:"password",name:"psw",id:"password",value:""}})]),v._v(" "),e("blockquote",[e("p",[v._v("// jQuery")]),v._v(" "),e("p",[v._v('$("#showPwd").focus(function() {')]),v._v(" "),e("p",[v._v("​    var text_value=$(this).val();")]),v._v(" "),e("p",[v._v("​    if (text_value =='请输入您的注册密码') {")]),v._v(" "),e("p",[v._v('​        $("#showPwd").hide();')]),v._v(" "),e("p",[v._v('​        $("#password").show().focus();')]),v._v(" "),e("p",[v._v("​    }")]),v._v(" "),e("p",[v._v("});")]),v._v(" "),e("p",[v._v('$("#password").blur(function() {')]),v._v(" "),e("p",[v._v("​    var text_value = $(this).val();")]),v._v(" "),e("p",[v._v('​    if (text_value == "") {')]),v._v(" "),e("p",[v._v('​        $("#showPwd").show();')]),v._v(" "),e("p",[v._v('​        $("#password").hide();')]),v._v(" "),e("p",[v._v("​    }")]),v._v(" "),e("p",[v._v("});")])]),v._v(" "),e("p",[e("strong",[v._v("二十、获取上传文件大小")])]),v._v(" "),e("blockquote",[e("input",{attrs:{type:"file",id:"filePath",onchange:"getFileSize(this)"}})]),v._v(" "),e("blockquote",[e("p",[v._v("// 兼容IE9低版本")]),v._v(" "),e("p",[v._v("function getFileSize(obj){")]),v._v(" "),e("p",[v._v("​    var filesize;")]),v._v(" "),e("p",[v._v("​")]),v._v(" "),e("p",[v._v("​    if(obj.files){")]),v._v(" "),e("p",[v._v("​        filesize = obj.files[0].size;")]),v._v(" "),e("p",[v._v("​    }else{")]),v._v(" "),e("p",[v._v("​        try{")]),v._v(" "),e("p",[v._v("​            var path,fso;")]),v._v(" "),e("p",[v._v("​            path = document.getElementById('filePath').value;")]),v._v(" "),e("p",[v._v('​            fso = new ActiveXObject("Scripting.FileSystemObject");')]),v._v(" "),e("p",[v._v("​            filesize = fso.GetFile(path).size;")]),v._v(" "),e("p",[v._v("​        }")]),v._v(" "),e("p",[v._v("​        catch(e){")]),v._v(" "),e("p",[v._v("​            // 在IE9及低版本浏览器，如果不容许ActiveX控件与页面交互，点击了否，就无法获取size")]),v._v(" "),e("p",[v._v("​            console.log(e.message); // Automation 服务器不能创建对象")]),v._v(" "),e("p",[v._v("​            filesize = 'error'; // 无法获取")]),v._v(" "),e("p",[v._v("​        }")]),v._v(" "),e("p",[v._v("​    }")]),v._v(" "),e("p",[v._v("​    return filesize;")]),v._v(" "),e("p",[v._v("}")])]),v._v(" "),e("p",[e("strong",[v._v("二十一、限制上传文件类型")])]),v._v(" "),e("hr"),v._v(" "),e("p",[v._v("1、高版本浏览器")]),v._v(" "),e("blockquote",[e("input",{attrs:{type:"file",name:"filePath",accept:".jpg,.jpeg,.doc,.docxs,.pdf"}})]),v._v(" "),e("p",[v._v("2、限制图片")]),v._v(" "),e("blockquote",[e("input",{staticClass:"file",attrs:{type:"file",value:"上传",accept:"image/*"}})]),v._v(" "),e("p",[v._v("3、低版本浏览器")]),v._v(" "),e("blockquote",[e("input",{attrs:{type:"file",id:"filePath",onchange:"limitTypes()"}})]),v._v(" "),e("blockquote",[e("p",[v._v("/* 通过扩展名，检验文件格式。")]),v._v(" "),e("p",[v._v("* @parma filePath{string} 文件路径")]),v._v(" "),e("p",[v._v("* @parma acceptFormat{Array} 允许的文件类型")]),v._v(" "),e("p",[v._v("* @result 返回值{Boolen}：true or false")]),v._v(" "),e("p",[v._v("*/")]),v._v(" "),e("p",[v._v("function checkFormat(filePath,acceptFormat){")]),v._v(" "),e("p",[v._v("​    var resultBool= false,")]),v._v(" "),e("p",[v._v("​        ex = filePath.substring(filePath.lastIndexOf('.') + 1);")]),v._v(" "),e("p",[v._v("​        ex = ex.toLowerCase();")]),v._v(" "),e("p",[v._v("​")]),v._v(" "),e("p",[v._v("​    for(var i = 0; i < acceptFormat.length; i++){")]),v._v(" "),e("p",[v._v("​    　　if(acceptFormat[i] == ex){")]),v._v(" "),e("p",[v._v("​            resultBool = true;")]),v._v(" "),e("p",[v._v("​            break;")]),v._v(" "),e("p",[v._v("​    　　}")]),v._v(" "),e("p",[v._v("​    }")]),v._v(" "),e("p",[v._v("​    return resultBool;")]),v._v(" "),e("p",[v._v("};")]),v._v(" "),e("p",[v._v("​")]),v._v(" "),e("p",[v._v("function limitTypes(){")]),v._v(" "),e("p",[v._v("​    var obj = document.getElementById('filePath');")]),v._v(" "),e("p",[v._v("​    var path = obj.value;")]),v._v(" "),e("p",[v._v("​    var result = checkFormat(path,['bmp','jpg','jpeg','png']);")]),v._v(" "),e("p",[v._v("​")]),v._v(" "),e("p",[v._v("​    if(!result){")]),v._v(" "),e("p",[v._v("​        alert('上传类型错误，请重新上传');")]),v._v(" "),e("p",[v._v("​        obj.value = '';")]),v._v(" "),e("p",[v._v("​    }")]),v._v(" "),e("p",[v._v("}")])]),v._v(" "),e("p",[e("strong",[v._v("二十二、正则表达式")])]),v._v(" "),e("blockquote",[e("p",[v._v("//验证邮箱")]),v._v(" "),e("p",[v._v("/^\\w+@([0-9a-zA-Z]+[.])+[a-z]{2,4}$/")]),v._v(" "),e("p",[v._v("//验证手机号")]),v._v(" "),e("p",[v._v("/^1[3|5|8|7]\\d{9}$/")]),v._v(" "),e("p",[v._v("//验证URL")]),v._v(" "),e("p",[v._v("/^http://.+./")]),v._v(" "),e("p",[v._v("//验证身份证号码")]),v._v(" "),e("p",[v._v("/(^\\d{15}$)|(^\\d{17}([0-9]|X|x)$)/")]),v._v(" "),e("p",[v._v("//匹配字母、数字、中文字符")]),v._v(" "),e("p",[v._v("/^([A-Za-z0-9]|[\\u4e00-\\u9fa5])*$/")]),v._v(" "),e("p",[v._v("//匹配中文字符")]),v._v(" "),e("p",[v._v("/[\\u4e00-\\u9fa5]/")]),v._v(" "),e("p",[v._v("//匹配双字节字符(包括汉字)")]),v._v(" "),e("p",[v._v("/[^\\x00-\\xff]/")])]),v._v(" "),e("p",[e("strong",[v._v("二十三、限制字符数")])]),v._v(" "),e("blockquote",[e("input",{attrs:{id:"txt",type:"text"}})]),v._v(" "),e("blockquote",[e("p",[v._v("//字符串截取")]),v._v(" "),e("p",[v._v("function getByteVal(val, max) {")]),v._v(" "),e("p",[v._v("​    var returnValue = '';")]),v._v(" "),e("p",[v._v("​    var byteValLen = 0;")]),v._v(" "),e("p",[v._v("​    for (var i = 0; i < val.length; i++) { if (val[i].match(/[^\\x00-\\xff]/ig) != null) byteValLen += 2; elsebyteValLen += 1; if (byteValLen > max) break;")]),v._v(" "),e("p",[v._v("​        returnValue += val[i];")]),v._v(" "),e("p",[v._v("​    }")]),v._v(" "),e("p",[v._v("​    return returnValue;")]),v._v(" "),e("p",[v._v("}")]),v._v(" "),e("p",[v._v("$('#txt').on('keyup', function () {")]),v._v(" "),e("p",[v._v("​    var val = this.value;")]),v._v(" "),e("p",[v._v('​    if (val.replace(/[^\\x00-\\xff]/g, "**").length > 14) {')]),v._v(" "),e("p",[v._v("​        this.value = getByteVal(val, 14);")]),v._v(" "),e("p",[v._v("​    }")]),v._v(" "),e("p",[v._v("});")])]),v._v(" "),e("p",[e("strong",[v._v("二十四、验证码倒计时")])]),v._v(" "),e("blockquote",[e("input",{attrs:{id:"send",type:"button",value:"发送验证码"}})]),v._v(" "),e("blockquote",[e("p",[v._v("// JavaScript")]),v._v(" "),e("p",[v._v("var times = 60, // 时间设置60秒")]),v._v(" "),e("p",[v._v("timer = null;")]),v._v(" "),e("p",[v._v("document.getElementById('send').onclick = function () {")]),v._v(" "),e("p",[v._v("// 计时开始")]),v._v(" "),e("p",[v._v("timer = setInterval(function () {")]),v._v(" "),e("p",[v._v("times--;")]),v._v(" "),e("p",[v._v("if (times <= 0) {")]),v._v(" "),e("p",[v._v("send.value = '发送验证码';")]),v._v(" "),e("p",[v._v("clearInterval(timer);")]),v._v(" "),e("p",[v._v("send.disabled = false;")]),v._v(" "),e("p",[v._v("times = 60;")]),v._v(" "),e("p",[v._v("} else {")]),v._v(" "),e("p",[v._v("send.value = times + '秒后重试';")]),v._v(" "),e("p",[v._v("send.disabled = true;")]),v._v(" "),e("p",[v._v("}")]),v._v(" "),e("p",[v._v("}, 1000);")]),v._v(" "),e("p",[v._v("}")])]),v._v(" "),e("blockquote",[e("p",[v._v("var times = 60,")]),v._v(" "),e("p",[v._v("​    timer = null;")]),v._v(" "),e("p",[v._v("$('#send').on('click', function () {")]),v._v(" "),e("p",[v._v("​    var $this = $(this);")]),v._v(" "),e("p",[v._v("​")]),v._v(" "),e("p",[v._v("​    // 计时开始")]),v._v(" "),e("p",[v._v("​    timer = setInterval(function () {")]),v._v(" "),e("p",[v._v("​        times--;")]),v._v(" "),e("p",[v._v("​")]),v._v(" "),e("p",[v._v("​        if (times <= 0) {")]),v._v(" "),e("p",[v._v("​            $this.val('发送验证码');")]),v._v(" "),e("p",[v._v("​            clearInterval(timer);")]),v._v(" "),e("p",[v._v("​            $this.attr('disabled', false);")]),v._v(" "),e("p",[v._v("​            times = 60;")]),v._v(" "),e("p",[v._v("​        } else {")]),v._v(" "),e("p",[v._v("​            $this.val(times + '秒后重试');")]),v._v(" "),e("p",[v._v("​            $this.attr('disabled', true);")]),v._v(" "),e("p",[v._v("​        }")]),v._v(" "),e("p",[v._v("​    }, 1000);")]),v._v(" "),e("p",[v._v("});")])]),v._v(" "),e("p",[e("strong",[v._v("二十五、时间倒计时")])]),v._v(" "),e("blockquote",[e("p",{attrs:{id:"_lefttime"}})]),v._v(" "),e("blockquote",[e("p",[v._v("var times = 60,")]),v._v(" "),e("p",[v._v("​    timer = null;")]),v._v(" "),e("p",[v._v("$('#send').on('click', function () {")]),v._v(" "),e("p",[v._v("​    var $this = $(this);")]),v._v(" "),e("p",[v._v("​")]),v._v(" "),e("p",[v._v("​    // 计时开始")]),v._v(" "),e("p",[v._v("​    timer = setInterval(function () {")]),v._v(" "),e("p",[v._v("​        times--;")]),v._v(" "),e("p",[v._v("​")]),v._v(" "),e("p",[v._v("​        if (times <= 0) {")]),v._v(" "),e("p",[v._v("​            $this.val('发送验证码');")]),v._v(" "),e("p",[v._v("​            clearInterval(timer);")]),v._v(" "),e("p",[v._v("​            $this.attr('disabled', false);")]),v._v(" "),e("p",[v._v("​            times = 60;")]),v._v(" "),e("p",[v._v("​        } else {")]),v._v(" "),e("p",[v._v("​            $this.val(times + '秒后重试');")]),v._v(" "),e("p",[v._v("​            $this.attr('disabled', true);")]),v._v(" "),e("p",[v._v("​        }")]),v._v(" "),e("p",[v._v("​    }, 1000);")]),v._v(" "),e("p",[v._v("});")])]),v._v(" "),e("p",[e("strong",[v._v("二十六、倒计时跳转")])]),v._v(" "),e("blockquote",[e("div",{attrs:{id:"showtimes"}})]),v._v(" "),e("blockquote",[e("p",[v._v("// 设置倒计时秒数")]),v._v(" "),e("p",[v._v("var t = 10;")]),v._v(" "),e("p",[v._v("// 显示倒计时秒数")]),v._v(" "),e("p",[v._v("function showTime(){")]),v._v(" "),e("p",[v._v("​    t -= 1;")]),v._v(" "),e("p",[v._v("​    document.getElementById('showtimes').innerHTML= t;")]),v._v(" "),e("p",[v._v("​    if(t==0){")]),v._v(" "),e("p",[v._v("​        location.href='error404.asp';")]),v._v(" "),e("p",[v._v("​    }")]),v._v(" "),e("p",[v._v("​    //每秒执行一次 showTime()")]),v._v(" "),e("p",[v._v('​    setTimeout("showTime()",1000);')]),v._v(" "),e("p",[v._v("}")]),v._v(" "),e("p",[v._v("showTime();")])]),v._v(" "),e("p",[e("strong",[v._v("二十七、时间戳、毫秒格式化")])]),v._v(" "),e("blockquote",[e("p",[v._v("function formatDate(now) {")]),v._v(" "),e("p",[v._v("​    var y = now.getFullYear();")]),v._v(" "),e("p",[v._v("​    var m = now.getMonth() + 1; // 注意 JavaScript 月份+1")]),v._v(" "),e("p",[v._v("​    var d = now.getDate();")]),v._v(" "),e("p",[v._v("​    var h = now.getHours();")]),v._v(" "),e("p",[v._v("​    var m = now.getMinutes();")]),v._v(" "),e("p",[v._v("​    var s = now.getSeconds();")]),v._v(" "),e("p",[v._v("​")]),v._v(" "),e("p",[v._v('​    return y + "-" + m + "-" + d + " " + h + ":" + m + ":" + s;')]),v._v(" "),e("p",[v._v("}")]),v._v(" "),e("p",[v._v("var nowDate = new Date(1442978789184);")]),v._v(" "),e("p",[v._v("alert(formatDate(nowDate));")])]),v._v(" "),e("p",[e("strong",[v._v("二十八、当前日期")])]),v._v(" "),e("blockquote",[e("p",[v._v("var calculateDate = function(){")]),v._v(" "),e("p",[v._v("​    var date = new Date();")]),v._v(" "),e("p",[v._v('​    var weeks = ["日","一","二","三","四","五","六"];')]),v._v(" "),e("p",[v._v('​    return date.getFullYear()+"年"+(date.getMonth()+1)+"月"+')]),v._v(" "),e("p",[v._v('​    date.getDate()+"日 星期"+weeks[date.getDay()];')]),v._v(" "),e("p",[v._v("}")]),v._v(" "),e("p",[v._v("$(function(){")]),v._v(" "),e("p",[v._v('​    $("#dateSpan").html(calculateDate());')]),v._v(" "),e("p",[v._v("});")])]),v._v(" "),e("p",[e("strong",[v._v("二十九、判断周六/周日")])]),v._v(" "),e("blockquote",[e("p",{attrs:{id:"text"}})]),v._v(" "),e("blockquote",[e("p",[v._v("function time(y,m){")]),v._v(" "),e("p",[v._v("​    var tempTime = new Date(y,m,0);")]),v._v(" "),e("p",[v._v("​    var time = new Date();")]),v._v(" "),e("p",[v._v("​    var saturday = new Array();")]),v._v(" "),e("p",[v._v("​    var sunday = new Array();")]),v._v(" "),e("p",[v._v("​")]),v._v(" "),e("p",[v._v("​    for(var i=1;i<=tempTime.getDate();i++){")]),v._v(" "),e("p",[v._v("​        time.setFullYear(y,m-1,i);")]),v._v(" "),e("p",[v._v("​")]),v._v(" "),e("p",[v._v("​        var day = time.getDay();")]),v._v(" "),e("p",[v._v("​")]),v._v(" "),e("p",[v._v("​        if(day == 6){")]),v._v(" "),e("p",[v._v("​            saturday.push(i);")]),v._v(" "),e("p",[v._v("​        }else if(day == 0){")]),v._v(" "),e("p",[v._v("​            sunday.push(i);")]),v._v(" "),e("p",[v._v("​        }")]),v._v(" "),e("p",[v._v("​    }")]),v._v(" "),e("p",[v._v("​")]),v._v(" "),e("p",[v._v('​    var text = y+"年"+m+"月份"+"'),e("br"),v._v('"')]),v._v(" "),e("p",[v._v('​                +"周六："+saturday.toString()+"'),e("br"),v._v('"')]),v._v(" "),e("p",[v._v('​                +"周日："+sunday.toString();')]),v._v(" "),e("p",[v._v("​")]),v._v(" "),e("p",[v._v('​    document.getElementById("text").innerHTML = text;')]),v._v(" "),e("p",[v._v("}")]),v._v(" "),e("p",[v._v("time(2018,5);")])]),v._v(" "),e("p",[e("strong",[v._v("三十、AJAX调用错误处理")])]),v._v(" "),e("hr"),v._v(" "),e("p",[v._v("当 Ajax 调用返回 404 或 500 错误时，就执行错误处理程序。如果没有定义处理程序，其他的 jQuery 代码或会就此罢工。定义一个全局的 Ajax 错误处理程序")]),v._v(" "),e("p",[e("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1IdLHtiaFiaHlfT6GVqJ3tMWzUh4PVqq1GIOaic2KubQicbjP7xhvRhMIxKtXhzLMDCRm3rHTLukcjiaA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"img"}})]),v._v(" "),e("p",[e("strong",[v._v("三十一、链式插件调用")])]),v._v(" "),e("p",[v._v("jQuery 允许“链式”插件的方法调用，以减轻反复查询 DOM 并创建多个 jQuery 对象的过程。")]),v._v(" "),e("p",[e("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1IdLHtiaFiaHlfT6GVqJ3tMWg7ohHSYJR8TTJGfu4pUd3s1iaTcvdzNBYLFxHGSctAFQtDCBnqdLfcQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"img"}})]),v._v(" "),e("p",[v._v("通过使用链式，可以改善")]),v._v(" "),e("p",[e("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1IdLHtiaFiaHlfT6GVqJ3tMWl835NWiaqyD0uGUUaWoR9pnOIA9XibqCIEpic3cGPaWAkrDMjbt6XlMsg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"img"}})]),v._v(" "),e("p",[v._v("还有一种方法是在（前缀$）变量中高速缓存元素")]),v._v(" "),e("p",[e("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1IdLHtiaFiaHlfT6GVqJ3tMWib8o7zEtJdES7vSNZ1zoG4bcE8oicTdZsGBPleQs9DfiaX4oSiaFOib9LAQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"img"}})]),v._v(" "),e("p",[v._v("链式和高速缓存的方法都是 jQuery 中可以让代码变得更短和更快的最佳做法。")]),v._v(" "),e("p",[v._v("本文在GitHub的地址 Common-code")])])}],!1,null,null,null);p.options.__file="分享前端开发常用代码片段.md";_.default=p.exports}}]);